<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Vue3学习笔记 | Kifroom</title><meta name="keywords" content="vue3,vite,Axios"><meta name="author" content="kif"><meta name="copyright" content="kif"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Vue3学习笔记"><meta name="application-name" content="Vue3学习笔记"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Vue3学习笔记"><meta property="og:url" content="https://wkif.gitee.io/post/21bc.html"><meta property="og:site_name" content="Kifroom"><meta property="og:description" content="Vue31.Vite搭建Vue3项目全局安装 Vitenpm install -g create-vite-app  使用 Vite 创建 Vue3 项目create-vite-app vue3-vite  可以发现瞬间创建完成。 运行cd vue3-vite   npm install (or &amp;amp;"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://kifimg.oss-cn-beijing.aliyuncs.com/project/202206261120941.png"><meta property="article:author" content="kif"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kifimg.oss-cn-beijing.aliyuncs.com/project/202206261120941.png"><meta name="description" content="Vue31.Vite搭建Vue3项目全局安装 Vitenpm install -g create-vite-app  使用 Vite 创建 Vue3 项目create-vite-app vue3-vite  可以发现瞬间创建完成。 运行cd vue3-vite   npm install (or &amp;amp;"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://wkif.gitee.io/post/21bc"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: kif","link":"链接: ","source":"来源: Kifroom","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Kifroom',
  title: 'Vue3学习笔记',
  postAI: '',
  pageFillDescription: 'Vue3, 1.Vite搭建Vue3项目, 全局安装 Vite, 使用 Vite 创建 Vue3 项目, 运行, vite, 2.从VUE2到VUE3, 新特性, Composition API, 单值变量 ref(), 元素引用, Teleport, Emits Components Option, 值得注意的新特性, 重写双向绑定, 优化Vdom, fragment, Tree shaking, vue指令补充, 3.ref, 3.1 ref, 3.2 isref, 3.3 shallowReftriggerRef, 3.4 customRef, 4.reactive, 4.1 reactive, 4.2 readonly, 4.3 shallowReactive, 5.to, 5.1 toRef, 5.2 torefs, 5.3 toRaw, 6.计算属性 computed, 案例：购物车, 7.监听属性 watch, 8.组件和生命周期, 8.1组件, 8.2组件生命周期, 8.2.1 onBrforeMount, 8.2.2 onMounted, 8.2.3 onBeforeUpdate, 8.2.4 onUpdated, 8.2.5 onbeforeUnmount, 8.2.6 onUnmount, 9.组件传值, 案例：常规页面布局, 9.1 defineProps, 简单数据类型, 复杂数据类型, 可选值默认值, 9.2 defineEmits, 9.3 defineExpose, 10.组件, 10.1全局组件, 10.2局部组件, 10.3 递归组件, 10.4 动态组件, 11.插槽slot, 11.1 匿名插槽, 11.2 具名插槽, 11.3 插槽作用域, 11.4 动态插槽, 12.异步组件、代码分包、suspense, defineAsyncComponent, Suspense, 13.axios引入, 14.teleport, 15.keep-alive, 16.依赖注入Provide、inject, 17.兄弟组件传参, 17.1 借助父组件, 17.2 eventbus, 17.3 mitt, 安装：, 全局注册：main.ts, 使用：, emit, 18.unplugin-auto-import搭建项目全局安装使用创建项目可以发现瞬间创建完成运行冷服务热更新打包从到新特性通过创建组件我们可以将界面中重复的部分连同其功能一起提取为可重用的代码段仅此一项就可以使我们的应用在可维护性和灵活性方面走得相当远然而我们的经验已经证明光靠这一点可能并不够尤其是当你的应用变得非常大的时候想想几百个组件处理这样的大型应用时共享和重用代码变得尤为重要等同于原通过定义变量病赋值到再出去就可以在用双大括号使用计算特性的定义注意需要注意里面没有和两个最早的是这个钩子单值变量还可以将整个的部分提出来导出的可以解构出来就不用在页面上使用多个元素引用通过给元素制定属性如再用单值定义为该单值就可以作为元素元素引用此时可操作元素如通过输入框改变变量值在监听该变量变量改变就使的内容也改变制定内容的父元素弹出关闭指定弹出框父级元素为值得注意的新特性中一些需要关注的新功能包括组合式片段触发组件选项来自的用于创建自定义渲染器单文件组件组合式语法糖单文件组件状态驱动的变量中的现在可以包含全局规则或只针对插槽内容的规则重写双向绑定基于实现基于新增实现优势丢掉麻烦的备份数据省去循环可以监听到数组变化包括等操作优化中每次更新都是全量对比性能消耗大只对比带有标记的内容图中标记允许多个根节点保持项目结果不变的条件下去除无用的代码指令补充阻止冒泡阻止事件的默认行为用途接受一个参数值并返回一个响应式且可改变的对象对象拥有一个指向内部值的单一属性实现修改页面响应式变化导入中用来定义变量类型用途判断是否是一个对象导入用途配合使用形成响应式引用数据类型导入实战源码全栈学习笔记仅仅使用无法实现对对象属性的响应式改变可以使用的解决办法改变整个强制更新视图自定义有点难先不学嘿嘿嘿用途接收一个普通对象然后返回该普通对象的响应式代理等同于的接受复杂数据类型如数组对象前面在接受复杂数据类型后内部处理其实是用的导入不用获取值注数组时需要注意这种数组操作不能用只能用创建一个响应式对象对象的属性是数组用途拷贝一份对象并设置为只读导入实战源码全栈学习笔记用途将对象第一层设置为响应式导入这样执行会发现深浅都会变化正确使用方法是用事件触发实战源码全栈学习笔记用途将对象某一个属性变成响应式导入原引点击之后原对象和新对象都会变而且页面不会响应式刷新实战源码全栈学习笔记原对象是响应式就可以响应式变化即用途对象解构后每个属性变成响应式导入这种解构后的和不是响应式的用途将响应式对象变回普通对象导入计算属性用途导入案例购物车序号名称数量单价操作实战源码全栈学习笔记监听属性导入深度监听高级监听器可以传入一个回调函数作为参数这个回调函数会在里面代码优先执行实战源码全栈学习笔记其返回值是一个函数执行即可停止监听组件和生命周期组件每一个文件即为一个组件通过在里面引入组件可以复用但引入名不能和原标签名相同组件生命周期挂载之前此时无法获取到元素正常正常实战源码全栈学习笔记挂载之后可以拿到元素正常实战源码全栈学习笔记更新之前更新之后卸载之前卸载完成会触发卸载加载事件可以用来演示组件传值案例常规页面布局父组件向子组件传值简单数据类型父组件为参数量名子组件定义了参数类型接受参数就可以直接使用复杂数据类型如需要传则需要在父组件使用简写子组件可选值默认值其中表示和是可选值设定可选值的默认值对于复杂数据类型数组对象需要使用函数返回形式子组件向父组件传值函数会返回一个函数参数是一个数组数组元素为父组件接受参数的函数名子组件点击绑定了父组件接受参数的事件名传参为父组件触发事件接受数据实战源码全栈学习笔记获取子组件实例父组件引用子组件时使用标签属性实战源码全栈学习笔记此时还无法拿到子组件使用暴露实战源码全栈学习笔记即可拿到组件全局组件组件主标题副标题注册局部组件引入递归组件父组件子组件主要在动态组件根据动态加载不同组件子组件子组件主组件解析通过引入三个组件定义类型定义动态的类型数组定义其默认值是第一个元素的组件页面即引入动态组件通过事件动态改变组件加载此时会有警告原因是会引用代理每个组件但这里不会改变组件所以需要取消代理原理实际上是给对象加上一个属性并置为使其跳过代理插槽匿名插槽子组件留下的一个空父组件可以在此填入东西父组件父组件传过来的内容子组件子组件通过做一个标记父子间在组件内容里通过插入内容具名插槽子组件使用属性父组件插入具体位置子组件父组件父组件传过来的内容可以简写为插槽作用域子组件可以把子组件的数据暴露给父组件子组件暴露父组件父组件传过来的内容子组件暴露的内容可以简写为动态插槽父组件位置中改变值就可以动态插入异步组件代码分包子组件需要异步操作请求加载图表时一般组件引入模式异步加载完不会显示相应数据所以需要异步引入其次所有打包之后都会在一个文件里面这样首屏加载时间过长因此需要分包异步组件异步组件函数在秒后返回数据此组件是一个异步组件主组件此时通过导入是无法显示数据的需要引入导入方式引入组件还需使用其中用来包裹子组件表示在未加载之前显示引入安装的此处换成自己获取回来的通常存在在或者里面让每个请求携带为自定义请根据实际情况自行修改出错啦错了服务器请求错误请稍后再试请求处理调用调用测试此处为自己请求地址结果获取失败表示这个内容在下方则的样式不会对生效注意元素不会对影响但会影响切换一般会销毁组件可以保存组件状态依赖注入导入根组件注入数据后所有子组件都可以访问到函数两个参数值键值根组件数据一级子组件拿到数据一级子组件拿到数据第二个参数是指定默认值否则无法识别类型为修改时所有界面的数据都会更改兄弟组件传参借助父组件父组件子组件派发子组件子组件通过将数据给到父组件父组件接收后给到子组件子组件通过接受安装全局注册使用地址可以避免重复引用等多次导入安装编辑允许自动导入目录下就会生成',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-26 11:22:14',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.kifroom.icu/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/ico.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://kifnav.kifroom.icu/" title="kifNav"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifnav.kifroom.icu/favicon.ico" alt="kifNav"/><span class="back-menu-item-text">kifNav</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Kifroom</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/links/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/message-board/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Axios/" style="font-size: 1.05rem;">Axios<sup>3</sup></a><a href="/tags/C-S-N/" style="font-size: 1.05rem;">C.S.N<sup>1</sup></a><a href="/tags/Ckeditor4/" style="font-size: 1.05rem;">Ckeditor4<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>3</sup></a><a href="/tags/Django/" style="font-size: 1.05rem;">Django<sup>1</sup></a><a href="/tags/Excel/" style="font-size: 1.05rem;">Excel<sup>1</sup></a><a href="/tags/Oracle/" style="font-size: 1.05rem;">Oracle<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>1</sup></a><a href="/tags/RSA/" style="font-size: 1.05rem;">RSA<sup>1</sup></a><a href="/tags/SQL/" style="font-size: 1.05rem;">SQL<sup>1</sup></a><a href="/tags/VS-code/" style="font-size: 1.05rem;">VS code<sup>1</sup></a><a href="/tags/Vue-js/" style="font-size: 1.05rem;">Vue.js<sup>2</sup></a><a href="/tags/Win/" style="font-size: 1.05rem;">Win<sup>3</sup></a><a href="/tags/dom-to-image/" style="font-size: 1.05rem;">dom-to-image<sup>1</sup></a><a href="/tags/express/" style="font-size: 1.05rem;">express<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>5</sup></a><a href="/tags/javascript/" style="font-size: 1.05rem;">javascript<sup>7</sup></a><a href="/tags/kali/" style="font-size: 1.05rem;">kali<sup>1</sup></a><a href="/tags/leetcode/" style="font-size: 1.05rem;">leetcode<sup>1</sup></a><a href="/tags/lerna/" style="font-size: 1.05rem;">lerna<sup>1</sup></a><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>1</sup></a><a href="/tags/matery/" style="font-size: 1.05rem;">matery<sup>2</sup></a><a href="/tags/monorepo/" style="font-size: 1.05rem;">monorepo<sup>1</sup></a><a href="/tags/node-js/" style="font-size: 1.05rem;">node.js<sup>2</sup></a><a href="/tags/pinia/" style="font-size: 1.05rem;">pinia<sup>1</sup></a><a href="/tags/pyqt/" style="font-size: 1.05rem;">pyqt<sup>1</sup></a><a href="/tags/this/" style="font-size: 1.05rem;">this<sup>1</sup></a><a href="/tags/vite/" style="font-size: 1.05rem;">vite<sup>2</sup></a><a href="/tags/vue3/" style="font-size: 1.05rem;">vue3<sup>3</sup></a><a href="/tags/webpack/" style="font-size: 1.05rem;">webpack<sup>1</sup></a><a href="/tags/workspace/" style="font-size: 1.05rem;">workspace<sup>1</sup></a><a href="/tags/%E5%85%BC%E5%AE%B9%E6%80%A7/" style="font-size: 1.05rem;">兼容性<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" style="font-size: 1.05rem;">开发规范<sup>2</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 1.05rem;">微信小程序<sup>4</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">操作系统<sup>3</sup></a><a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 1.05rem;">数组<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E4%BE%BF%E7%AD%BE/" style="font-size: 1.05rem;">网站便签<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">面试<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">学习笔记</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/vue3/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>vue3</span></a><a class="article-meta__tags" href="/tags/vite/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>vite</span></a><a class="article-meta__tags" href="/tags/Axios/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Axios</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Vue3学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-04-24T07:35:00.000Z" title="发表于 2022-04-24 15:35:00">2022-04-24</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2022-06-26T03:22:14.261Z" title="更新于 2022-06-26 11:22:14">2022-06-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">12.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>67分钟</span></span><span class="post-meta-separator"></span><span class="leancloud_visitors" id="/post/21bc.html" data-flag-title="Vue3学习笔记"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span class="leancloud-visitors-count" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为北京"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>北京</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://kifimg.oss-cn-beijing.aliyuncs.com/project/202206261120941.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://wkif.gitee.io/post/21bc.html"><header><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">学习笔记</a><a href="/tags/vue3/" tabindex="-1" itemprop="url">vue3</a><a href="/tags/vite/" tabindex="-1" itemprop="url">vite</a><a href="/tags/Axios/" tabindex="-1" itemprop="url">Axios</a><h1 id="CrawlerTitle" itemprop="name headline">Vue3学习笔记</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">kif</span><time itemprop="dateCreated datePublished" datetime="2022-04-24T07:35:00.000Z" title="发表于 2022-04-24 15:35:00">2022-04-24</time><time itemprop="dateCreated datePublished" datetime="2022-06-26T03:22:14.261Z" title="更新于 2022-06-26 11:22:14">2022-06-26</time></header><h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1><h2 id="1-Vite搭建Vue3项目"><a href="#1-Vite搭建Vue3项目" class="headerlink" title="1.Vite搭建Vue3项目"></a>1.Vite搭建Vue3项目</h2><h3 id="全局安装-Vite"><a href="#全局安装-Vite" class="headerlink" title="全局安装 Vite"></a>全局安装 Vite</h3><pre class="line-numbers language-none"><code class="language-none">npm install -g create-vite-app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="使用-Vite-创建-Vue3-项目"><a href="#使用-Vite-创建-Vue3-项目" class="headerlink" title="使用 Vite 创建 Vue3 项目"></a>使用 Vite 创建 Vue3 项目</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">create-vite-app vue3-vite<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>可以发现瞬间创建完成。</p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd vue3-vite
  npm install (or &#96;yarn&#96;)
  npm run dev (or &#96;yarn dev&#96;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><p>冷服务</p>
<p>热更新</p>
<p>Rollup打包</p>
<h2 id="2-从VUE2到VUE3"><a href="#2-从VUE2到VUE3" class="headerlink" title="2.从VUE2到VUE3"></a>2.从VUE2到VUE3</h2><h3 id="新特性"><a href="#新特性" class="headerlink" title="新特性"></a>新特性</h3><h4 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h4><pre class="line-numbers language-none"><code class="language-none">通过创建 Vue 组件，我们可以将界面中重复的部分连同其功能一起提取为可重用的代码段。仅此一项就可以使我们的应用在可维护性和灵活性方面走得相当远。然而，我们的经验已经证明，光靠这一点可能并不够，尤其是当你的应用变得非常大的时候——想想几百个组件。处理这样的大型应用时，共享和重用代码变得尤为重要。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;
  &lt;!-- &lt;button @click&#x3D;&quot;count++&quot;&gt;count is: &#123;&#123; count &#125;&#125;&lt;&#x2F;button&gt; --&gt;
  &lt;p&gt;
    Edit &lt;code&gt;components&#x2F;HelloWorld.vue&lt;&#x2F;code&gt; to test hot module replacement.
  &lt;&#x2F;p&gt;

  &lt;p&gt;&#123;&#123; data.counter &#125;&#125;&lt;&#x2F;p&gt;

&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; reactive，computed &#125; from &quot;@vue&#x2F;reactivity&quot;;
export default &#123;
  name: &quot;HelloWorld&quot;,
  props: &#123;
    msg: String,
  &#125;,
  &#x2F;&#x2F; data() &#123;
  &#x2F;&#x2F;   return &#123;
  &#x2F;&#x2F;     count: 0,
  &#x2F;&#x2F;   &#125;;
  &#x2F;&#x2F; &#125;,

  setup() &#123;
    const data &#x3D; reactive(&#123;
      counter: 1,
     doublecounter: computed(() &#x3D;&gt; data.counter * 2)
    &#125;);
    return &#123; data &#125;;
    
  &#125;,


&#125;;
&lt;&#x2F;script&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>setup等同于原data，通过reactive定义变量病赋值到data，再return出去，就可以在template用双大括号使用，计算特性：doublecounter的定义，注意需要import computed</p>
<p><strong>注意：setup里面没有beforecreate和created两个，最早的是onMounted这个钩子</strong></p>
<h5 id="单值变量-ref"><a href="#单值变量-ref" class="headerlink" title="单值变量 ref()"></a>单值变量 ref()</h5><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;
  &lt;!-- &lt;button @click&#x3D;&quot;count++&quot;&gt;count is: &#123;&#123; count &#125;&#125;&lt;&#x2F;button&gt; --&gt;
  &lt;p&gt;
    Edit &lt;code&gt;components&#x2F;HelloWorld.vue&lt;&#x2F;code&gt; to test hot module replacement.
  &lt;&#x2F;p&gt;

  &lt;p&gt;&#123;&#123; msg2 &#125;&#125;&lt;&#x2F;p&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; ref &#125; from &quot;@vue&#x2F;reactivity&quot;;
export default &#123;
  name: &quot;HelloWorld&quot;,
  props: &#123;
    msg: String,
  &#125;,
  &#x2F;&#x2F; data() &#123;
  &#x2F;&#x2F;   return &#123;
  &#x2F;&#x2F;     count: 0,
  &#x2F;&#x2F;   &#125;;
  &#x2F;&#x2F; &#125;,

  setup() &#123;


    const msg2 &#x3D; ref(&#39;some massage&#39;);

    return &#123;  msg2 &#125;;
  &#125;,
&#125;;
&lt;&#x2F;script&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>还可以将整个counter的部分提出来</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;
  &lt;!-- &lt;button @click&#x3D;&quot;count++&quot;&gt;count is: &#123;&#123; count &#125;&#125;&lt;&#x2F;button&gt; --&gt;
  &lt;p&gt;
    Edit &lt;code&gt;components&#x2F;HelloWorld.vue&lt;&#x2F;code&gt; to test hot module replacement.
  &lt;&#x2F;p&gt;

  &lt;p&gt;&#123;&#123; data.counter &#125;&#125;&lt;&#x2F;p&gt;
  &lt;p&gt;&#123;&#123; data.doublecounter &#125;&#125;&lt;&#x2F;p&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; reactive, computed, ref &#125; from &quot;@vue&#x2F;reactivity&quot;;
export default &#123;
  name: &quot;HelloWorld&quot;,
  props: &#123;
    msg: String,
  &#125;,

  setup() &#123;
    const data &#x3D; userCounter()
    return &#123; data &#125;;
  &#125;,
&#125;;
function userCounter() &#123;
  const data &#x3D; reactive(&#123;
    counter: 1,
    doublecounter: computed(() &#x3D;&gt; data.counter * 2),
  &#125;);

  return data
&#125;
&lt;&#x2F;script&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>导出的data可以解构出来，就不用在页面上使用多个data.</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt;
  &lt;!-- &lt;button @click&#x3D;&quot;count++&quot;&gt;count is: &#123;&#123; count &#125;&#125;&lt;&#x2F;button&gt; --&gt;
  &lt;p&gt;
    Edit &lt;code&gt;components&#x2F;HelloWorld.vue&lt;&#x2F;code&gt; to test hot module replacement.
  &lt;&#x2F;p&gt;

  &lt;p&gt;&#123;&#123; counter &#125;&#125;&lt;&#x2F;p&gt;
  &lt;p&gt;&#123;&#123; doublecounter &#125;&#125;&lt;&#x2F;p&gt;

&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; reactive, computed, ref ,toRefs&#125; from &quot;@vue&#x2F;reactivity&quot;;
export default &#123;
  name: &quot;HelloWorld&quot;,
  props: &#123;
    msg: String,
  &#125;,

  setup() &#123;
    const &#123; counter,doublecounter &#125; &#x3D; userCounter()
   


    return &#123; counter,doublecounter &#125;;
  &#125;,
&#125;;
function userCounter() &#123;
  const data &#x3D; reactive(&#123;
    counter: 1,
    doublecounter: computed(() &#x3D;&gt; data.counter * 2),
  &#125;);

  return toRefs(data)
&#125;
&lt;&#x2F;script&gt;

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/wkif/ImageHosting@master/kif_img/20211021202234.png" alt="image-20211021202234604"></p>
<h5 id="元素引用"><a href="#元素引用" class="headerlink" title="元素引用"></a>元素引用</h5><p>通过给元素制定属性，如</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;p ref&#x3D;&quot;desc&quot;&gt;&lt;&#x2F;p&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>再用单值定义为null，该单值就可以作为元素</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;p ref&#x3D;&quot;desc&quot;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; reactive, computed, ref, toRefs &#125; from &quot;@vue&#x2F;reactivity&quot;;
export default &#123;
  name: &quot;HelloWorld&quot;,
  props: &#123;
    msg: String,
  &#125;,
  setup() &#123;

    &#x2F;&#x2F; 元素引用
    const desc &#x3D; ref(null);
    return &#123;  desc &#125;;
  &#125;,
&#125;;

&lt;&#x2F;script&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>此时desc可操作元素<p></p>
<p>如通过输入框改变变量值，在监听该变量，变量改变就使p的内容也改变</p>
<h4 id="Teleport"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport</h4><p>制定内容的父元素</p>
<p>a.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;!-- teleprot --&gt;
  &lt;modalButton&gt;&lt;&#x2F;modalButton&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import modalButton from &#39;.&#x2F;modalButton.vue&#39;
export default &#123;
  name: &quot;HelloWorld&quot;,
  components: &#123;
    modalButton
  &#125;,
  props: &#123;
    msg: String,
  &#125;,
  setup() &#123;
   
  &#125;,
&#125;;
&lt;&#x2F;script&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>b.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;template&gt;
  &lt;div&gt;
    &lt;button @click&#x3D;&quot;modalOpen &#x3D; true&quot;&gt;弹出&lt;&#x2F;button&gt;
    &lt;teleport to&#x3D;&quot;body&quot;&gt;
      &lt;div v-if&#x3D;&quot;modalOpen&quot;&gt;
        &lt;div&gt;
          kif
          &lt;button @click&#x3D;&quot;modalOpen &#x3D; false&quot;&gt;关闭&lt;&#x2F;button&gt;
        &lt;&#x2F;div&gt;
      &lt;&#x2F;div&gt;
    &lt;&#x2F;teleport&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
  props: &#123;&#125;,
  components: &#123;&#125;,
  data() &#123;
    return &#123; modalOpen: false &#125;;
  &#125;,
  methods: &#123;&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-none"><code class="language-none">&lt;teleport to&#x3D;&quot;body&quot;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>指定弹出框父级元素为body</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/wkif/ImageHosting@master/kif_img/20211021223106.png"></p>
<h4 id="Emits-Components-Option"><a href="#Emits-Components-Option" class="headerlink" title="Emits Components Option"></a>Emits Components Option</h4><h2 id="值得注意的新特性"><a href="#值得注意的新特性" class="headerlink" title="值得注意的新特性"></a>值得注意的新特性</h2><p>Vue 3 中一些需要关注的新功能包括：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">组合式 API</a></li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/teleport.html">Teleport</a></li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/migration/fragments.html">片段</a></li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/component-custom-events.html">触发组件选项</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/tree/master/packages/runtime-core">来自 <code>@vue/runtime-core</code> 的 <code>createRenderer</code> API</a>，用于创建自定义渲染器</li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/api/sfc-script-setup.html">单文件组件组合式 API 语法糖 (&#96;&#96;)</a></li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/api/sfc-style.html#%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-css">单文件组件状态驱动的 CSS 变量 (&#96;&#96; 中的 <code>v-bind</code>)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0023-scoped-styles-changes.md">SFC &#96;&#96; 现在可以包含全局规则或只针对插槽内容的规则</a></li>
<li><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/migration/suspense.html">Suspense</a></li>
</ul>
<h3 id="重写双向绑定"><a href="#重写双向绑定" class="headerlink" title="重写双向绑定"></a>重写双向绑定</h3><p>vue2基于Object.defineProperty()实现</p>
<p>Vue3基于Proxy（ES6新增）实现</p>
<p>优势：</p>
<ul>
<li>丢掉麻烦的备份数据</li>
<li>省去for in循环</li>
<li>可以监听到数组变化（包括push等操作）</li>
</ul>
<h3 id="优化Vdom"><a href="#优化Vdom" class="headerlink" title="优化Vdom"></a>优化Vdom</h3><p>vue2中，每次更新diff，都是全量对比，性能消耗大，</p>
<p>vue3，只对比带有标记的内容</p>
<p><a target="_blank" rel="noopener" href="https://template-explorer.vuejs.org/"></a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/imgforhexo/202203311205278.png" alt="image-20220331120518186"></p>
<p>图中标记item 1 text</p>
<h3 id="fragment"><a href="#fragment" class="headerlink" title="fragment"></a>fragment</h3><p>vue3允许多个template根节点</p>
<h3 id="Tree-shaking"><a href="#Tree-shaking" class="headerlink" title="Tree shaking"></a>Tree shaking</h3><p>保持项目结果不变的条件下，去除无用的代码</p>
<h2 id="vue指令补充"><a href="#vue指令补充" class="headerlink" title="vue指令补充"></a>vue指令补充</h2><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;div class&#x3D;&quot;kif&quot; @click&#x3D;&quot;parend&quot;&gt;
  &lt;div class&#x3D;&quot;text&quot; v-if&#x3D;&quot;flag&quot; v-text&#x3D;&quot;message&quot;&gt;&lt;&#x2F;div&gt;
  &lt;button @click.stop&#x3D;&quot;fun2&quot;&gt;on&lt;&#x2F;button&gt;
&lt;&#x2F;div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>@<strong>click.stop</strong>阻止冒泡</p>
<p>@click.prevent 阻止事件的默认行为，</p>
<p>@keyup.enter</p>
<h2 id="3-ref"><a href="#3-ref" class="headerlink" title="3.ref"></a>3.ref</h2><h3 id="3-1-ref"><a href="#3-1-ref" class="headerlink" title="3.1 ref"></a>3.1 ref</h3><p>用途：</p>
<p>接受一个参数值并返回一个响应式且可改变的 ref <strong>对象</strong>。ref 对象拥有一个指向内部值的单一属性 .value。实现修改ref.value页面响应式变化</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref &#125; from &#39;vue&#39;

let count &#x3D; ref(0)

let change &#x3D; () &#x3D;&gt; &#123;
    count.value++
    console.log(count)
&#125;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;h1&gt;&#123;&#123; count &#125;&#125;&lt;&#x2F;h1&gt;
   &lt;button @click&#x3D;&quot;change&quot;&gt; change&lt;&#x2F;button&gt;

&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Ref</strong></p>
<p>ts中用来定义变量类型</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref<span class="token punctuation">,</span>Ref <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">let</span> <span class="token literal-property property">count</span><span class="token operator">:</span>Ref<span class="token operator">&lt;</span>number<span class="token operator">></span> <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="3-2-isref"><a href="#3-2-isref" class="headerlink" title="3.2 isref"></a>3.2 isref</h3><p>用途：判断是否是一个REF对象</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref<span class="token punctuation">,</span>isRef <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 */</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref<span class="token punctuation">,</span>isRef<span class="token punctuation">,</span>Ref <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

defineProps<span class="token operator">&lt;</span><span class="token punctuation">&#123;</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> string <span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token literal-property property">count</span><span class="token operator">:</span>Ref<span class="token operator">&lt;</span>number<span class="token operator">></span> <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>


<span class="token keyword">let</span> <span class="token literal-property property">s</span><span class="token operator">:</span>string<span class="token operator">=</span><span class="token string">'kif'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isRef</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-3-shallowRef，triggerRef"><a href="#3-3-shallowRef，triggerRef" class="headerlink" title="3.3 shallowRef，triggerRef"></a>3.3 shallowRef，triggerRef</h3><p>用途:配合使用形成响应式引用数据类型</p>
<p>导入：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123;shallowRef,triggerRef &#125; from &#39;vue&#39;
let obj &#x3D;&#123;
    name:&#39;kif&#39;,
    age:12
&#125;
let objRef &#x3D; shallowRef(obj)
let change2&#x3D;()&#x3D;&gt;&#123;
    objRef.value.age&#x3D;34
    console.log(objRef)
&#125;
&lt;&#x2F;script&gt;
&lt;template&gt;
    &lt;p&gt;&#123;&#123;objRef&#125;&#125;&lt;&#x2F;p&gt;
    &lt;button @click&#x3D;&quot;change2&quot;&gt;change2&lt;&#x2F;button&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>![image-20220531152451508](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220531152451508.png)</p>
<p>仅仅使用shallowRef无法实现对对象属性的响应式改变（objRef.value.age&#x3D;34），可以使用的解决办法：</p>
<ol>
<li><p>改变整个value</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">objRef<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token punctuation">&#123;</span>
       <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'kif'</span><span class="token punctuation">,</span>
       <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">45</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


</li>
<li><p>triggerRef强制更新视图</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">objRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">45</span>
<span class="token function">triggerRef</span><span class="token punctuation">(</span>objRef<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="3-4-customRef"><a href="#3-4-customRef" class="headerlink" title="3.4 customRef"></a>3.4 customRef</h3><p>自定义Ref</p>
<p><strong>有点难，先不学，嘿嘿嘿</strong></p>
<h2 id="4-reactive"><a href="#4-reactive" class="headerlink" title="4.reactive"></a>4.reactive</h2><h3 id="4-1-reactive"><a href="#4-1-reactive" class="headerlink" title="4.1 reactive"></a>4.1 reactive</h3><p>用途：接收一个普通对象然后返回该普通对象的响应式代理。等同于 2.x 的 Vue.observable()</p>
<p>接受复杂数据类型，如数组，对象</p>
<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>ps：前面ref在接受复杂数据类型后内部处理其实是用的reactive</p></blockquote>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 */</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj<span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'hello'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">change</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    obj<span class="token punctuation">.</span>msg<span class="token operator">=</span><span class="token string">'world'</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>template<span class="token operator">></span>
    <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> obj <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"change"</span><span class="token operator">></span>button<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>reactive不用value获取值</p></blockquote>
<p>注：数组时需要注意！</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 */</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>

<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arrReactive<span class="token operator">=</span><span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">change2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    arrReactive<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token punctuation">&#125;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>template<span class="token operator">></span>
    
    <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> arrReactive <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"change2"</span><span class="token operator">></span>button<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>arrReactive[1]&#x3D;2这种数组操作不能用，只能用push，</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> <span class="token function-variable function">change2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> newArr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span>

    arrReactive<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>newArr<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>way2： 创建一个响应式对象，对象的属性是数组</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 */</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>

<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

type <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">let</span> <span class="token literal-property property">obj2</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">=</span> reactive<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token function-variable function">change3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> newarr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
    obj2<span class="token punctuation">.</span>list <span class="token operator">=</span> newarr
<span class="token punctuation">&#125;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>template<span class="token operator">></span>

    <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> obj2<span class="token punctuation">.</span>list <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"change3"</span><span class="token operator">></span>button<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-2-readonly"><a href="#4-2-readonly" class="headerlink" title="4.2 readonly"></a>4.2 readonly</h3><p>用途：拷贝一份reactive对象并设置为只读</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> readonly <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 */</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive<span class="token punctuation">,</span>readonly <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hello'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    obj<span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token string">'world'</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// readonly</span>
<span class="token keyword">let</span> copyObj<span class="token operator">=</span><span class="token function">readonly</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
copyObj<span class="token punctuation">.</span>msg<span class="token operator">=</span><span class="token string">'world'</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>![image-20220531155512565](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220531155512565.png)</p>
<h3 id="4-3-shallowReactive"><a href="#4-3-shallowReactive" class="headerlink" title="4.3 shallowReactive"></a>4.3 shallowReactive</h3><p>用途：将对象第一层设置为响应式</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>shallowReactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 */</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>

<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> shallowReactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>


<span class="token keyword">let</span> deepObjShall<span class="token operator">=</span><span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'kif'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">firends</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zm'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">changeS</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    deepObjShall<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'kif2'</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">let</span> <span class="token function-variable function">changeS2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    deepObjShall<span class="token punctuation">.</span>firends<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">11</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//changeS()</span>
<span class="token comment">//changeS2()</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>template<span class="token operator">></span>

    <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> deepObjShall <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
      <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"changeS"</span><span class="token operator">></span>button<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"changeS2"</span><span class="token operator">></span>button<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>changeS()<br>changeS2()</p>
<p>这样执行会发现深浅都会变化，正确使用方法是用事件触发</p></blockquote>
<p>![image-20220531160403290](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220531160403290.png)</p>
<h2 id="5-to"><a href="#5-to" class="headerlink" title="5.to"></a>5.to</h2><h3 id="5-1-toRef"><a href="#5-1-toRef" class="headerlink" title="5.1 toRef"></a>5.1 toRef</h3><p>用途：将对象某一个属性变成响应式</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> toRef <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; toRef &#125; from &#39;vue&#39;

let obj &#x3D; &#123;
    name: &#39;kif&#39;,
    age: 13
&#125;

let tR &#x3D; toRef(obj, &#39;age&#39;)

let change &#x3D; () &#x3D;&gt; &#123;
    tR.value++
    console.log(&quot;原&quot;, obj)
    console.log(&#39;引&#39;, tR)
&#125;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;!-- &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt; --&gt;
    &lt;p&gt;&#123;&#123; tR &#125;&#125;&lt;&#x2F;p&gt;
    &lt;button @click&#x3D;&quot;change&quot;&gt;dianji&lt;&#x2F;button&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>点击之后原对象和新对象都会变，而且页面不会响应式刷新</p>
<p>![image-20220531161211613](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220531161211613.png)</p>
<p>原对象是响应式就可以响应式变化</p>
<p>即：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span><span class="token function">reactive</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'kif'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">13</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-2-torefs"><a href="#5-2-torefs" class="headerlink" title="5.2 torefs"></a>5.2 torefs</h3><p>用途：对象解构后每个属性变成响应式</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> toRefs <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> <span class="token punctuation">&#123;</span>name<span class="token punctuation">,</span>age<span class="token punctuation">&#125;</span> <span class="token operator">=</span><span class="token function">reactive</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'kif'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">13</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>这种解构后的name 和age不是响应式的，</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; reactive,toRefs &#125; from &#39;vue&#39;

let &#123;name,age&#125; &#x3D;toRefs(reactive( &#123;
    name: &#39;kif&#39;,
    age: 13
&#125;))

let change2&#x3D;()&#x3D;&gt;&#123;
    age.value++
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;!-- &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h1&gt; --&gt;
    &lt;p&gt;&#123;&#123; age &#125;&#125;&lt;&#x2F;p&gt;
    &lt;button @click&#x3D;&quot;change2&quot;&gt;dianji&lt;&#x2F;button&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-3-toRaw"><a href="#5-3-toRaw" class="headerlink" title="5.3 toRaw"></a>5.3 toRaw</h3><p>用途：将响应式对象变回普通对象</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> toRew <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="6-计算属性-computed"><a href="#6-计算属性-computed" class="headerlink" title="6.计算属性 computed"></a>6.计算属性 computed</h2><p>用途：</p>
<p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> computed <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; computed,ref &#125; from &#39;vue&#39;;

let firstName &#x3D;ref(&#39;&#39;)
let lastName &#x3D;ref(&#39;&#39;)
let fullName &#x3D; computed(() &#x3D;&gt; &#123;
    return &#96;$&#123;firstName.value&#125; $&#123;lastName.value&#125;&#96;
&#125;)
&#x2F;&#x2F;let fullName2 &#x3D; computed(&#123;
&#x2F;&#x2F;     set() &#123;

&#x2F;&#x2F;         firstName.value + lastName.value

&#x2F;&#x2F;     &#125;,
&#x2F;&#x2F;     get() &#123;
&#x2F;&#x2F;         return &#96;$&#123;firstName.value&#125; $&#123;lastName.value&#125;&#96;
&#x2F;&#x2F;     &#125;
&#x2F;&#x2F; &#125;)

&lt;&#x2F;script&gt;

&lt;template&gt;
input:&lt;input v-model&#x3D;&quot;firstName&quot;&#x2F;&gt;&lt;br&#x2F;&gt;
input:&lt;input v-model&#x3D;&quot;lastName&quot;&#x2F;&gt;&lt;br&#x2F;&gt;
&lt;p&gt;&#123;&#123;fullName&#125;&#125;&lt;&#x2F;p&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="案例：购物车"><a href="#案例：购物车" class="headerlink" title="案例：购物车"></a>案例：购物车</h6><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive, computed &#125; from &#39;vue&#39;;

type goods &#x3D; &#123;
    name: string,
    num: number,
    price: number
&#125;

let data &#x3D; reactive&lt;goods[]&gt;([
    &#123;
        name: &#39;goods1&#39;,
        num: 1,
        price: 12
    &#125;,
    &#123;
        name: &#39;goods2&#39;,
        num: 2,
        price: 13
    &#125;,
    &#123;
        name: &#39;goods3&#39;,
        num: 2,
        price: 14
    &#125;
])
let add &#x3D; (index: number) &#x3D;&gt; &#123;
    data[index].num++
&#125;
let reduce &#x3D; (index: number) &#x3D;&gt; &#123;
    if(data[index].num&gt;0)&#123;
        data[index].num--
    &#125;
    
&#125;
let deleteDo &#x3D; (index:number)&#x3D;&gt;&#123;
    data.splice(index,1)
&#125;
let sum&#x3D;computed(()&#x3D;&gt;&#123;
    let sum&#x3D;0
    data.forEach(item&#x3D;&gt;&#123;
        sum+&#x3D;item.num*item.price
    &#125;)
    return sum
&#125;)
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;dvi class&#x3D;&quot;main&quot;&gt;
        &lt;table border style&#x3D;&quot;width:800px&quot;&gt;
            &lt;thead&gt;
                &lt;tr align&#x3D;&quot;center&quot;&gt;
                    &lt;th &gt;序号&lt;&#x2F;th&gt;
                    &lt;th&gt;名称&lt;&#x2F;th&gt;
                    &lt;th&gt;数量&lt;&#x2F;th&gt;
                    &lt;th&gt;单价&lt;&#x2F;th&gt;
                    &lt;th&gt;操作&lt;&#x2F;th&gt;
                &lt;&#x2F;tr&gt;
            &lt;&#x2F;thead&gt;
            &lt;tbody&gt;
                &lt;tr v-for&#x3D;&quot;(item, index) in data&quot;&gt;
                    &lt;td&gt;&#123;&#123; index &#125;&#125;&lt;&#x2F;td&gt;
                    &lt;td&gt;&#123;&#123; item.name &#125;&#125;&lt;&#x2F;td&gt;
                    &lt;td&gt; &lt;button @click&#x3D;&quot;add(index)&quot;&gt;+&lt;&#x2F;button&gt;&#123;&#123; item.num &#125;&#125;&lt;button @click&#x3D;&quot;reduce(index)&quot;&gt;-&lt;&#x2F;button&gt;
                    &lt;&#x2F;td&gt;
                    &lt;td&gt;&#123;&#123; item.price &#125;&#125;&lt;&#x2F;td&gt;
                    &lt;td&gt;

                        &lt;button @click&#x3D;&quot;deleteDo(index)&quot;&gt;delete&lt;&#x2F;button&gt;
                    &lt;&#x2F;td&gt;
                &lt;&#x2F;tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;&#x2F;td&gt;
                    &lt;td&gt;&lt;&#x2F;td&gt;
                    &lt;td&gt;&lt;&#x2F;td&gt;
                    &lt;td&gt;&lt;&#x2F;td&gt;
                    &lt;td&gt;sum:&#123;&#123;sum&#125;&#125;&lt;&#x2F;td&gt;
                &lt;&#x2F;tr&gt;
            &lt;&#x2F;tbody&gt;
            &lt;tfoot&gt;&lt;&#x2F;tfoot&gt;
        &lt;&#x2F;table&gt;
    &lt;&#x2F;dvi&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>![image-20220531171949840](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220531171949840.png)</p>
<h2 id="7-监听属性-watch"><a href="#7-监听属性-watch" class="headerlink" title="7.监听属性 watch"></a>7.监听属性 watch</h2><p>导入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> watch <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 17:27:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; watch, ref &#125; from &#39;vue&#39;

let me1 &#x3D; ref(&#39;&#39;)
let me2 &#x3D; ref(&#39;&#39;)
watch([me1,me2], (newVal, oldVal) &#x3D;&gt; &#123;
    console.log(newVal, oldVal)
&#125;)


&lt;&#x2F;script&gt;

&lt;template&gt;
    watch
    &lt;input v-model&#x3D;&quot;me1&quot; &#x2F;&gt;
    &lt;input v-model&#x3D;&quot;me2&quot; &#x2F;&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>深度监听：</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>高级监听器 watchEffect</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 18:09:58
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123;  ref,watchEffect &#125; from &#39;vue&#39;

let messag2&#x3D;ref(&#39;&#39;)

watchEffect(()&#x3D;&gt;&#123;
    console.log(messag2.value)
&#125;)


&lt;&#x2F;script&gt;

&lt;template&gt;
    watch
    &lt;input v-model&#x3D;&quot;messag2&quot; &#x2F;&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>watchEffect(()&#x3D;&gt;{<br>    console.log(messag2.value)<br>})</p>
<p>可以传入一个回调函数作为参数，这个回调函数会在里面代码优先执行</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-05-31 17:22:40 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-05-31 18:13:05
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; watch, ref, reactive, watchEffect &#125; from &#39;vue&#39;

let messag2 &#x3D; ref(&#39;&#39;)

watchEffect((fun) &#x3D;&gt; &#123;
    
    console.log(messag2.value)
    fun(() &#x3D;&gt; &#123;
        console.log(&#39;before&#39;)
    &#125;)
&#125;)


&lt;&#x2F;script&gt;

&lt;template&gt;
    watch
    &lt;input v-model&#x3D;&quot;messag2&quot; &#x2F;&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>![image-20220531181339899](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220531181339899.png)</p>
<p>其返回值是一个函数，执行即可停止监听</p>
<pre class="line-numbers language-none"><code class="language-none">let stop &#x3D; watchEffect((fun) &#x3D;&gt; &#123;
    
    console.log(messag2.value)
    fun(() &#x3D;&gt; &#123;
        console.log(&#39;before&#39;)
    &#125;)
&#125;)
stop()
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="8-组件和生命周期"><a href="#8-组件和生命周期" class="headerlink" title="8.组件和生命周期"></a>8.组件和生命周期</h2><h3 id="8-1组件"><a href="#8-1组件" class="headerlink" title="8.1组件"></a>8.1组件</h3><p>每一个.vue文件即为一个组件，通过在script里面</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> x <span class="token keyword">from</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>引入，组件可以复用，但引入名不能和html原标签名相同。</p>
<h3 id="8-2组件生命周期"><a href="#8-2组件生命周期" class="headerlink" title="8.2组件生命周期"></a>8.2组件生命周期</h3><h4 id="8-2-1-onBrforeMount"><a href="#8-2-1-onBrforeMount" class="headerlink" title="8.2.1 onBrforeMount"></a>8.2.1 onBrforeMount</h4><p>挂载之前</p>
<p>此时无法获取到dom元素</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 09:53:54 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-01 09:53:54 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; onBeforeMount &#125; from &#39;vue&#39;
console.log(&#39;正常&#39;)&#x2F;&#x2F;正常

onBeforeMount(() &#x3D;&gt; &#123;
    let div &#x3D; document.getElementsByClassName(&#39;main&#39;)[0]
    console.log(div)&#x2F;&#x2F;undefined
    console.log(&#39;onBeforeMount&#39;)&#x2F;&#x2F;onBeforeMount

&#125;)

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;k&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>![image-20220601095438896](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220601095438896.png)</p>
<h4 id="8-2-2-onMounted"><a href="#8-2-2-onMounted" class="headerlink" title="8.2.2 onMounted"></a>8.2.2 onMounted</h4><p>挂载之后，可以拿到dom元素</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 09:53:54 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 09:56:46
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; onBeforeMount,onMounted &#125; from &#39;vue&#39;
console.log(&#39;正常&#39;)

onBeforeMount(() &#x3D;&gt; &#123;
    let div &#x3D; document.getElementsByClassName(&#39;main&#39;)[0]
    console.log(div)
    console.log(&#39;onBeforeMount&#39;)

&#125;)
onMounted(()&#x3D;&gt;&#123;
    let div &#x3D; document.getElementsByClassName(&#39;main&#39;)[0]
    console.log(div)
    console.log(&#39;onMounted&#39;)
&#125;)
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;k&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>![image-20220601095716241](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220601095716241.png)</p>
<h4 id="8-2-3-onBeforeUpdate"><a href="#8-2-3-onBeforeUpdate" class="headerlink" title="8.2.3 onBeforeUpdate"></a>8.2.3 onBeforeUpdate</h4><p>更新之前</p>
<h4 id="8-2-4-onUpdated"><a href="#8-2-4-onUpdated" class="headerlink" title="8.2.4 onUpdated"></a>8.2.4 onUpdated</h4><p>更新之后</p>
<h4 id="8-2-5-onbeforeUnmount"><a href="#8-2-5-onbeforeUnmount" class="headerlink" title="8.2.5 onbeforeUnmount"></a>8.2.5 onbeforeUnmount</h4><p>卸载之前</p>
<h4 id="8-2-6-onUnmount"><a href="#8-2-6-onUnmount" class="headerlink" title="8.2.6 onUnmount"></a>8.2.6 onUnmount</h4><p>卸载完成</p>
<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>v-if 会触发卸载加载事件，可以用来演示</p></blockquote>
<h2 id="9-组件传值"><a href="#9-组件传值" class="headerlink" title="9.组件传值"></a>9.组件传值</h2><h6 id="案例：常规页面布局"><a href="#案例：常规页面布局" class="headerlink" title="案例：常规页面布局"></a>案例：常规页面布局</h6><p>layout.vue:</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import Menu from &#39;.&#x2F;menu&#x2F;index.vue&#39;
import Content from &#39;.&#x2F;content&#x2F;index.vue&#39;
import Header from &#39;.&#x2F;header&#x2F;index.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;Menu&gt;&lt;&#x2F;Menu&gt;
        &lt;div class&#x3D;&quot;main-right&quot;&gt;
            &lt;Header&gt;&lt;&#x2F;Header&gt;
            &lt;Content&gt;&lt;&#x2F;Content&gt;
        &lt;&#x2F;div&gt;

    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
.main &#123;
    display: flex;
    overflow: hidden;
    .menu &#123;
        width: 200px;
    &#125;

    &amp;-right &#123;
        flex: 1;
        border: 1px solid blue;
        display: flex;
        flex-direction: column;
    &#125;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>content.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref &#125; from &#39;vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;content&quot;&gt;
        content
        &lt;div class&#x3D;&quot;list&quot; v-for&#x3D;&quot;item in 100&quot; :key&#x3D;&quot;item&quot;&gt;
            &#123;&#123; item &#125;&#125;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style  scoped&gt;
.content &#123;
    &#x2F;* height: 100px; *&#x2F;
    flex: 1;
    overflow: auto;
    border: 2px solid green;
    padding: 20px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>header.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

        import &#123; ref &#125; from &#39;vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
&lt;div class&#x3D;&quot;header&quot;&gt;
    header
&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.header&#123;
    &#x2F;* flex:1 *&#x2F;
    height:100px
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>menu.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import Menu from &#39;.&#x2F;menu&#x2F;index.vue&#39;
import Content from &#39;.&#x2F;content&#x2F;index.vue&#39;
import Header from &#39;.&#x2F;header&#x2F;index.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;Menu&gt;&lt;&#x2F;Menu&gt;
        &lt;div class&#x3D;&quot;main-right&quot;&gt;
            &lt;Header&gt;&lt;&#x2F;Header&gt;
            &lt;Content&gt;&lt;&#x2F;Content&gt;
        &lt;&#x2F;div&gt;

    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
.main &#123;
    display: flex;
    overflow: hidden;
    .menu &#123;
        width: 200px;
    &#125;

    &amp;-right &#123;
        flex: 1;
        border: 1px solid blue;
        display: flex;
        flex-direction: column;
    &#125;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="9-1-defineProps"><a href="#9-1-defineProps" class="headerlink" title="9.1 defineProps"></a>9.1 defineProps</h3><p>父组件向子组件传值</p>
<h4 id="简单数据类型"><a href="#简单数据类型" class="headerlink" title="简单数据类型"></a>简单数据类型</h4><p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;Menu title&#x3D;&quot;this is title&quot;&gt;&lt;&#x2F;Menu&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>title为参数量名</p>
<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:03:10 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-01 14:03:10 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

type Props &#x3D; &#123;
    title: string
&#125;
defineProps&lt;Props&gt;()

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;menu&quot;&gt;
        menu
        &#123;&#123;title&#125;&#125;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&#39;less&#39; scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js">type Props <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> string
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>定义了参数类型，defineProps接受参数，就可以直接使用</p>
<h4 id="复杂数据类型"><a href="#复杂数据类型" class="headerlink" title="复杂数据类型"></a>复杂数据类型</h4><p>如需要传 let list &#x3D; reactive([1,2,3,4])</p>
<p>则需要在父组件使用v-bind:(简写：)</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:05:17 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 14:08:02
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive &#125; from &#39;vue&#39;;
import Menu from &#39;.&#x2F;menu&#x2F;index.vue&#39;
import Content from &#39;.&#x2F;content&#x2F;index.vue&#39;
import Header from &#39;.&#x2F;header&#x2F;index.vue&#39;

let list &#x3D; reactive([1,2,3,4])
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;Menu title&#x3D;&quot;this is title&quot; :data&#x3D;&quot;list&quot;&gt;&lt;&#x2F;Menu&gt;
        &lt;div class&#x3D;&quot;main-right&quot;&gt;
            &lt;Header&gt;&lt;&#x2F;Header&gt;
            &lt;Content&gt;&lt;&#x2F;Content&gt;
        &lt;&#x2F;div&gt;

    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
.main &#123;
    display: flex;
    overflow: hidden;
    .menu &#123;
        width: 200px;
    &#125;

    &amp;-right &#123;
        flex: 1;
        border: 1px solid blue;
        display: flex;
        flex-direction: column;
    &#125;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:03:10 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 14:07:47
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref &#125; from &#39;vue&#39;
type Props &#x3D; &#123;
    title: string,
    data:number[]
&#125;
defineProps&lt;Props&gt;()

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;menu&quot;&gt;
        menu
        &#123;&#123;title&#125;&#125;
        &#123;&#123;data&#125;&#125;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&#39;less&#39; scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="可选值默认值"><a href="#可选值默认值" class="headerlink" title="可选值默认值"></a>可选值默认值</h4><pre class="line-numbers language-js" data-language="js"><code class="language-js">type Props <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    name<span class="token operator">?</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
    data<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>
<span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span>Props<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'kif'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">data</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其中</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">name<span class="token operator">?</span><span class="token operator">:</span>string<span class="token punctuation">,</span> 

data<span class="token operator">?</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>表示   name 和data是可选值</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span>Props<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'kif'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">data</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>设定可选值的默认值，对于复杂数据类型（数组，对象），需要使用函数返回形式</p>
<h3 id="9-2-defineEmits"><a href="#9-2-defineEmits" class="headerlink" title="9.2 defineEmits"></a>9.2 defineEmits</h3><p>子组件向父组件传值</p>
<p>defineEmits函数会返回一个函数，参数是一个数组，数组元素为父组件接受参数的函数名。</p>
<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:05:28 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 14:14:43
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive &#125; from &#39;vue&#39;
const emit &#x3D; defineEmits([&#39;on-click&#39;])
let list &#x3D; reactive([1, 2, 3, 4])
const ckickUp &#x3D; () &#x3D;&gt; &#123;
    emit(&#39;on-click&#39;, list)
&#125;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;header&quot;&gt;
        header
        &lt;button @click&#x3D;&quot;ckickUp&quot;&gt;点击&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.header &#123;
    &#x2F;* flex:1 *&#x2F;
    height: 100px
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>const emit &#x3D; defineEmits([‘on-click’])    绑定了父组件接受参数的事件名</p>
<p> emit(‘on-click’, list) 传参为list</p>
<p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:05:17 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 14:16:08
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive &#125; from &#39;vue&#39;;
import Menu from &#39;.&#x2F;menu&#x2F;index.vue&#39;
import Content from &#39;.&#x2F;content&#x2F;index.vue&#39;
import Header from &#39;.&#x2F;header&#x2F;index.vue&#39;

let list &#x3D; reactive([1, 2, 3, 4])


const getList &#x3D; (list: number[]) &#x3D;&gt; &#123;
    console.log(list)
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;Menu title&#x3D;&quot;this is title&quot; :data&#x3D;&quot;list&quot;&gt;&lt;&#x2F;Menu&gt;
        &lt;div class&#x3D;&quot;main-right&quot;&gt;
            &lt;Header @on-click&#x3D;&quot;getList&quot;&gt;&lt;&#x2F;Header&gt;
            &lt;Content&gt;&lt;&#x2F;Content&gt;
        &lt;&#x2F;div&gt;

    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
.main &#123;
    display: flex;
    overflow: hidden;

    .menu &#123;
        width: 200px;
    &#125;

    &amp;-right &#123;
        flex: 1;
        border: 1px solid blue;
        display: flex;
        flex-direction: column;
    &#125;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>@on-click&#x3D;”getList” 触发事件接受数据</p>
<p>![image-20220601142656647](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220601142656647.png)</p>
<h3 id="9-3-defineExpose"><a href="#9-3-defineExpose" class="headerlink" title="9.3 defineExpose"></a>9.3 defineExpose</h3><p>获取子组件实例</p>
<p> 父组件引用子组件时使用标签 ref属性</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:05:17 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 14:38:34
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive,ref &#125; from &#39;vue&#39;;
import Menu from &#39;.&#x2F;menu&#x2F;index.vue&#39;
import Content from &#39;.&#x2F;content&#x2F;index.vue&#39;
import Header from &#39;.&#x2F;header&#x2F;index.vue&#39;

let list &#x3D; reactive([1, 2, 3, 4])

let header &#x3D; ref(null)
const getList &#x3D; (list: number[]) &#x3D;&gt; &#123;
    console.log(header.value)
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;Menu title&#x3D;&quot;this is title&quot; :data&#x3D;&quot;list&quot;&gt;&lt;&#x2F;Menu&gt;
        &lt;div class&#x3D;&quot;main-right&quot;&gt;
            &lt;Header ref&#x3D;&quot;header&quot; @on-click&#x3D;&quot;getList&quot;&gt;&lt;&#x2F;Header&gt;
            &lt;Content&gt;&lt;&#x2F;Content&gt;
        &lt;&#x2F;div&gt;

    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
.main &#123;
    display: flex;
    overflow: hidden;

    .menu &#123;
        width: 200px;
    &#125;

    &amp;-right &#123;
        flex: 1;
        border: 1px solid blue;
        display: flex;
        flex-direction: column;
    &#125;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"> <span class="token operator">&lt;</span>Header ref<span class="token operator">=</span><span class="token string">"header"</span> @on<span class="token operator">-</span>click<span class="token operator">=</span><span class="token string">"getList"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">></span>
 <span class="token keyword">let</span> header <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">list</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>header<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>![image-20220601144053146](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220601144053146.png)</p>
<p>此时还无法拿到</p>
<p>子组件使用defineExpose暴露</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    list
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>![image-20220601144239332](E:\kifFile\study\Vue3 + vite + Ts + pinia + 实战 + 源码 +全栈\Vue3学习笔记.assets\image-20220601144239332.png)</p>
<p>即可拿到</p>
<h2 id="10-组件"><a href="#10-组件" class="headerlink" title="10.组件"></a>10.组件</h2><h3 id="10-1全局组件"><a href="#10-1全局组件" class="headerlink" title="10.1全局组件"></a>10.1全局组件</h3><p>组件Card：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
type Porp &#x3D; &#123;
    content?: string
&#125;


defineProps&lt;Porp&gt;()

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;dvi class&#x3D;&quot;card&quot;&gt;
        &lt;div class&#x3D;&quot;card-header&quot;&gt;
            &lt;div class&#x3D;&quot;title&quot;&gt;
                主标题
            &lt;&#x2F;div&gt;
            &lt;div class&#x3D;&quot;subtitle&quot;&gt;
                副标题
            &lt;&#x2F;div&gt;
        &lt;&#x2F;div&gt;
        &lt;div class&#x3D;&quot;cardcontent&quot;&gt;
            &#123;&#123; content &#125;&#125;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;dvi&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;less&quot; scoped&gt;
.crad&#123;
    &amp;-header&#123;
        display: flex;
        justify-content: space-between;
    &#125;
    &amp;-content&#123;
        padding: 20px;
    &#125;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>注册：</p>
<p>main.ts:</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> <span class="token string">'./assets/css/reset.less'</span>
<span class="token keyword">import</span> card <span class="token keyword">from</span> <span class="token string">'./components/card/index.vue'</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'card'</span><span class="token punctuation">,</span>card<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>createApp(App).component(‘card’,card).mount(‘#app’)</p>
<h3 id="10-2局部组件"><a href="#10-2局部组件" class="headerlink" title="10.2局部组件"></a>10.2局部组件</h3><p>引入：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> layout <span class="token keyword">from</span> <span class="token string">'./components/layout/index.vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="10-3-递归组件"><a href="#10-3-递归组件" class="headerlink" title="10.3 递归组件"></a>10.3 递归组件</h3><p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:03:10 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 18:11:24
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref, reactive &#125; from &#39;vue&#39;

import Tree from &#39;..&#x2F;..&#x2F;Recursive-components&#x2F;index.vue&#39;
type Props &#x3D; &#123;
    title: string,
    name?: string,
    data?: number[]
&#125;
withDefaults(defineProps&lt;Props&gt;(), &#123;
    name: &#39;kif&#39;,
    data: () &#x3D;&gt; [1, 2, 3, 4]
&#125;)

type treeList &#x3D; &#123;
    name: string,
    children?: treeList[]
&#125;
let data &#x3D; reactive&lt;treeList[]&gt;([
    &#123;
        name: &#39;data-1&#39;,
        children: [
            &#123;
                name: &#39;data-1-1&#39;,
                children: [
                    &#123;
                        name: &#39;data-1-1-1&#39;
                    &#125;
                ]
            &#125;
        ]
    &#125;,
    &#123;
        name: &#39;data-2&#39;,
        children: [
            &#123;
                name: &#39;data-2-1&#39;
            &#125;
        ]
    &#125;
])


&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;menu&quot;&gt;
        menu
        &lt;br &#x2F;&gt;
        &#123;&#123; title &#125;&#125;
        &lt;br &#x2F;&gt;
        &#123;&#123; name &#125;&#125;
        &lt;br &#x2F;&gt;
        &lt;!-- &#123;&#123; data &#125;&#125; --&gt;
        &lt;br &#x2F;&gt;
        &lt;Tree :content&#x3D;&quot;data&quot;&gt;&lt;&#x2F;Tree&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&#39;less&#39; scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
&#x2F;&#x2F; import itemTree from &#39;.&#x2F;index.vue&#39;

type treeList &#x3D; &#123;
    name: string,
    children?: treeList[]
&#125;
type Porp &#x3D; &#123;
    content?: treeList[]
&#125;
defineProps&lt;Porp&gt;()


&lt;&#x2F;script&gt;
&lt;script lang&#x3D;&quot;ts&quot;&gt;
export default &#123;
    name: &#39;itemTree&#39;
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div :key&#x3D;&quot;index&quot; v-for&#x3D;&quot;(item, index) in content&quot;&gt;
        &#123;&#123; item.name &#125;&#125;
        &lt;itemTree v-if&#x3D;&quot;item?.children?.length&quot; :content&#x3D;&quot;item.children&quot;&gt;&lt;&#x2F;itemTree&gt;

    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;


&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>主要在：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;itemTree v-if&#x3D;&quot;item?.children?.length&quot; :content&#x3D;&quot;item.children&quot;&gt;&lt;&#x2F;itemTree&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'itemTree'</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="10-4-动态组件"><a href="#10-4-动态组件" class="headerlink" title="10.4 动态组件"></a>10.4 动态组件</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;component :is&#x3D;&quot;Com&quot;&gt;&lt;&#x2F;component&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>根据Com动态加载不同Vue组件</p>
<p>子组件A：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 13:53:55 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-06 13:53:55 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

        import &#123; ref &#125; from &#39;vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
AAAA
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件B：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 13:54:05 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-06 13:54:05 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

        import &#123; ref &#125; from &#39;vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
BBB
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>主组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:05:22 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-01 16:55:22
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref, reactive,markRaw &#125; from &#39;vue&#39;
import A from &#39;.&#x2F;A.vue&#39;
import B from &#39;.&#x2F;B.vue&#39;
import C from &#39;.&#x2F;C.vue&#39;

type Tabs &#x3D; &#123;
    title: string,
    comName: any
&#125;
type Com &#x3D; Pick&lt;Tabs, &#39;comName&#39;&gt;

let data &#x3D; reactive&lt;Tabs[]&gt;([
    &#123;
        title: &#39;A&#39;,
        comName: markRaw(A)
    &#125;,
    &#123;
        title: &#39;B&#39;,
        comName: markRaw(B)
    &#125;,
    &#123;
        title: &#39;C&#39;,
        comName:markRaw(C)
    &#125;
])

&#x2F;&#x2F; let surrentTab &#x3D; ref(data[tabIndex.value].comName)
let surrentTab &#x3D; reactive&lt;Com&gt;(&#123;
    comName: data[0].comName
&#125;)

let changeTab &#x3D; (index: number) &#x3D;&gt; &#123;
    surrentTab.comName &#x3D; data[index].comName
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;content&quot;&gt;
        content
        &lt;div class&#x3D;&quot;Com&quot; v-for&#x3D;&quot;(item, index) in data&quot; :key&#x3D;&quot;item.title&quot;&gt;
            &lt;button @click&#x3D;&quot;changeTab(index)&quot;&gt;&#123;&#123; item.title &#125;&#125;&lt;&#x2F;button&gt;
        &lt;&#x2F;div&gt;

        &lt;component :is&#x3D;&quot;surrentTab.comName&quot;&gt;&lt;&#x2F;component&gt;
       
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style  scoped&gt;
.content &#123;
    &#x2F;* height: 100px; *&#x2F;
    flex: 1;
    overflow: auto;
    border: 2px solid green;
    padding: 20px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>解析：</p>
<p>通过</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">'./A.vue'</span>
<span class="token keyword">import</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">'./B.vue'</span>
<span class="token keyword">import</span> <span class="token constant">C</span> <span class="token keyword">from</span> <span class="token string">'./C.vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>引入三个组件</p>
<p>定义Tab类型：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">Tabs</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    comName<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>定义动态的data类型Tabs数组</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>Tabs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
        comName<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span>
        comName<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span>
        comName<span class="token operator">:</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>定义surrentTab，其默认值是data第一个元素的组件</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">let</span> surrentTab <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>Com<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    comName<span class="token operator">:</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>comName
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>





<p>页面即引入动态组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;component :is&#x3D;&quot;surrentTab.comName&quot;&gt;&lt;&#x2F;component&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>通过事件动态改变组件加载：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">let</span> <span class="token function-variable function">changeTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    surrentTab<span class="token punctuation">.</span>comName <span class="token operator">=</span> data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>comName
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>此时会有警告：</p>
<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>[Vue warn]: Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with <code>markRaw</code> or using <code>shallowRef</code> instead of <code>ref</code>.  Component that was made reactive:  </p></blockquote>
<p>原因是reactive会引用Porxy代理每个组件，但这里不会改变组件，所以需要取消Porxy代理</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>Tabs<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
        comName<span class="token operator">:</span> <span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'B'</span><span class="token punctuation">,</span>
        comName<span class="token operator">:</span> <span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'C'</span><span class="token punctuation">,</span>
        comName<span class="token operator">:</span><span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>markRow原理：实际上是给对象加上一个__v-skip属性并置为true，使其跳过代理</p></blockquote>
<h2 id="11-插槽slot"><a href="#11-插槽slot" class="headerlink" title="11.插槽slot"></a>11.插槽slot</h2><h3 id="11-1-匿名插槽"><a href="#11-1-匿名插槽" class="headerlink" title="11.1 匿名插槽"></a>11.1 匿名插槽</h3><p>子组件留下的一个空，父组件可以在此填入东西</p>
<p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import child from &#39;.&#x2F;child.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
&lt;!-- kk --&gt;
&lt;child&gt;
    &lt;template v-slot&gt;
        &lt;div class&#x3D;&quot;fu&quot;&gt;
            父组件传过来的内容
        &lt;&#x2F;div&gt;
    &lt;&#x2F;template&gt;
&lt;&#x2F;child&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        child
        &lt;slot&gt;&lt;&#x2F;slot&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>子组件通过</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token operator">&lt;</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>做一个标记</p>
<p>父子间在组件内容里通过v-slot插入内容</p>
<h3 id="11-2-具名插槽"><a href="#11-2-具名插槽" class="headerlink" title="11.2 具名插槽"></a>11.2 具名插槽</h3><p>子组件slot使用name属性，父组件v-slot:name插入具体位置</p>
<p>子组件</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 14:24:37 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-06 14:24:37 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref &#125; from &#39;vue&#39;


&lt;&#x2F;script&gt;

&lt;template&gt;
   
    &lt;div class&#x3D;&quot;footer&quot;&gt;
        &lt;slot name&#x3D;&quot;footer&quot;&gt;&lt;&#x2F;slot&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 14:25:26 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-06 14:25:26 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import child from &#39;.&#x2F;child.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
&lt;!-- kk --&gt;
&lt;child&gt;
  
    &lt;template v-slot:footer&gt;
        &lt;div class&#x3D;&quot;fu&quot;&gt;
            父组件传过来的内容2
        &lt;&#x2F;div&gt;
    &lt;&#x2F;template&gt;
&lt;&#x2F;child&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>v-slot:footer     可以简写为    #footer</p></blockquote>
<h3 id="11-3-插槽作用域"><a href="#11-3-插槽作用域" class="headerlink" title="11.3 插槽作用域"></a>11.3 插槽作用域</h3><p>子组件 slot可以把子组件的数据暴露给父组件</p>
<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 14:24:37 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-06 14:46:25
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive &#125; from &#39;vue&#39;

type persion &#x3D; &#123;
    name: string,
    age: number
&#125;
let data &#x3D; reactive&lt;persion[]&gt;([
    &#123;
        name: &#39;kif&#39;,
        age: 18
    &#125;,
    &#123;
        name: &#39;kif2&#39;,
        age: 18
    &#125;

])

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;
        child
        &lt;slot :data&#x3D;&quot;data&quot;&gt;&lt;&#x2F;slot&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;slot :data&#x3D;&quot;data&quot;&gt;&lt;&#x2F;slot&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>暴露data</p>
<p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 14:25:26 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-06 14:48:01
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import child from &#39;.&#x2F;child.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
&lt;!-- kk --&gt;
&lt;child&gt;
    &lt;template v-slot&#x3D;&quot;data&quot;&gt;
        &lt;div class&#x3D;&quot;fu&quot;&gt;
            父组件传过来的内容

            子组件暴露的内容：
            &#123;&#123;data&#125;&#125;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;template&gt;

&lt;&#x2F;child&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote><span class="custom-blockquote-svg"><svg width="24" height="24" viewBox="0 0 24 24" fill="" xmlns="http://www.w3.org/2000/svg" data-reactroot="">
<path fill="" d="M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z" undefined="1"></path>
<path fill="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z" undefined="1"></path>
<path fill="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z" undefined="1"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z"></path>
<path stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" stroke="" d="M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z"></path>
</svg>
</span><p>v-slot&#x3D;”data” 可以简写为    #default&#x3D;“data”</p></blockquote>
<h3 id="11-4-动态插槽"><a href="#11-4-动态插槽" class="headerlink" title="11.4 动态插槽"></a>11.4 动态插槽</h3><p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-06 14:25:26 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-06 14:58:52
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; ref, reactive &#125; from &#39;vue&#39;
import child from &#39;.&#x2F;child.vue&#39;
let s &#x3D; ref(&#39;footer&#39;)
&lt;&#x2F;script&gt;

&lt;template&gt;
&lt;!-- kk --&gt;
&lt;child&gt;
   
    &lt;template #[s]&gt;
        &lt;div&gt;
            位置
        &lt;&#x2F;div&gt;
    &lt;&#x2F;template&gt;
&lt;&#x2F;child&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p> #[s]中 改变s值就可以动态插入</p>
<h2 id="12-异步组件、代码分包、suspense"><a href="#12-异步组件、代码分包、suspense" class="headerlink" title="12.异步组件、代码分包、suspense"></a>12.异步组件、代码分包、suspense</h2><p>子组件需要异步操作（请求、加载图表）时，一般组件引入模式异步加载完不会显示相应数据，所以需要异步引入；</p>
<p>其次，所有vue打包之后都会在一个js文件里面，这样首屏加载时间过长，因此需要分包；</p>
<p>异步组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

let getTest &#x3D; function () &#123;
    return new Promise((resolve, reject) &#x3D;&gt; &#123;
        setTimeout(() &#x3D;&gt; &#123;
            resolve(&#123;
                code: 0,
                data: &#123;
                    name: &#39;test&#39;
                &#125;
            &#125;)
        &#125;, 2000)
    &#125;)
&#125;

let res &#x3D; await getTest()
console.log(res)
&lt;&#x2F;script&gt;

&lt;template&gt;
    异步组件：
    &#123;&#123; res &#125;&#125;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>getTest函数在2秒后返回数据，此组件是一个异步组件；</p>
<p>主组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-01 14:05:22 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-06 15:43:27
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

 import asyncCom from &#39;.&#x2F;asyncCom.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;content&quot;&gt;
      &lt;asyncCom&gt;&lt;&#x2F;asyncCom&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style  scoped&gt;

&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>此时通过  <code>import asyncCom from &#39;./asyncCom.vue&#39;</code>导入是无法显示数据的</p>
<p>需要引入 <code>defineAsyncComponent</code></p>
<h3 id="defineAsyncComponent"><a href="#defineAsyncComponent" class="headerlink" title="defineAsyncComponent"></a>defineAsyncComponent</h3><p>导入方式：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineAsyncComponent <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>引入组件：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">let</span> asyncCom <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./asyncCom.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>还需使用 <code>Suspense</code></p>
<h3 id="Suspense"><a href="#Suspense" class="headerlink" title="Suspense"></a>Suspense</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;Suspense&gt;
            &lt;template #default&gt;
                &lt;asyncCom&gt;&lt;&#x2F;asyncCom&gt;
            &lt;&#x2F;template&gt;
            &lt;template #fallback&gt;
               &lt;div&gt; loading...&lt;&#x2F;div&gt;
            &lt;&#x2F;template&gt;


        &lt;&#x2F;Suspense&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>其中</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template #default&gt;
                &lt;asyncCom&gt;&lt;&#x2F;asyncCom&gt;
            &lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>用来包裹子组件</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template #fallback&gt;
              &lt;div&gt; loading...&lt;&#x2F;div&gt;
           &lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>表示在未加载之前显示loading…</p>
<h2 id="13-axios引入"><a href="#13-axios引入" class="headerlink" title="13.axios引入"></a>13.axios引入</h2><p>安装：</p>
<pre class="line-numbers language-none"><code class="language-none">npm install axios -S    <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>request.ts</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token comment">// import &#123; ElMessage  &#125; from 'element-plus'</span>
<span class="token comment">// import &#123; getToken &#125; from '@/utils/auth'</span>


<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">request</span> <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>

        <span class="token comment">// create an axios instance</span>
        <span class="token keyword">const</span> service <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token comment">// baseURL: process.env.BASE_API, // api 的 base_url</span>
            baseURL<span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">,</span>
            timeout<span class="token operator">:</span> <span class="token number">80000</span> <span class="token comment">// request timeout</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

        <span class="token comment">// request interceptor</span>
        service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span>config<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">let</span> token<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token comment">//此处换成自己获取回来的token，通常存在在cookie或者store里面</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// 让每个请求携带token-- ['X-Token']为自定义key 请根据实际情况自行修改</span>
                    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'X-Token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> token

                    config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token operator">+</span> token
                <span class="token punctuation">&#125;</span>
                <span class="token keyword">return</span> config
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            error <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// Do something with request error</span>
                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"出错啦"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span> <span class="token comment">// for debug</span>
                <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">)</span>

        <span class="token comment">// response interceptor</span>
        service<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span>response<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> response<span class="token punctuation">.</span>data
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            error <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span> <span class="token operator">+</span> error<span class="token punctuation">)</span> <span class="token comment">// for debug</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'错了'</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'服务器请求错误，请稍后再试'</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#125;</span>
                <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">)</span>
        <span class="token comment">// 请求处理</span>
        <span class="token function">service</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> request<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>调用：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>request<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>
 
<span class="token comment">// 调用测试</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span> <span class="token string">'/xxxxx/'</span><span class="token punctuation">,</span><span class="token comment">//此处为自己请求地址</span>
      method<span class="token operator">:</span> <span class="token string">'get'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getTest<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"@/service/test"</span><span class="token punctuation">;</span>
   <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token function">getTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"结果"</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>error <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获取失败！'</span><span class="token punctuation">)</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="14-teleport"><a href="#14-teleport" class="headerlink" title="14.teleport"></a>14.teleport</h2><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-07 15:42:12 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-07 15:42:12 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;



&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;\
        &lt;teleport to&#x3D;&#39;html&#39;&gt;
            &lt;div class&#x3D;&quot;te&quot;&gt;
                loading
            &lt;&#x2F;div&gt;
        &lt;&#x2F;teleport&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code> &lt;teleport to=&#39;html&#39;&gt;</code>表示这个内容在html下方，则main的样式不会对te生效</p>
<p><strong>注意:main 元素v-show不会对te影响，但v-if会影响</strong></p>
<h2 id="15-keep-alive"><a href="#15-keep-alive" class="headerlink" title="15.keep-alive"></a>15.keep-alive</h2><p>v-if切换一般会销毁组件，keepalive可以保存组件状态</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-07 15:51:23 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-07 16:02:10
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; ref, reactive, markRaw, defineAsyncComponent &#125; from &#39;vue&#39;
import login from &#39;.&#x2F;login.vue&#39;
import register from &#39;.&#x2F;register.vue&#39;
let flag &#x3D; ref(false)
const change &#x3D; () &#x3D;&gt; &#123;
    flag.value &#x3D; !flag.value
&#125;

&lt;&#x2F;script&gt;

&lt;template&gt;
    keepalive
    &lt;button @click&#x3D;&quot;change&quot;&gt;toggle&lt;&#x2F;button&gt;
    &lt;keep-alive&gt;
        &lt;login v-if&#x3D;&quot;flag&quot;&gt;&lt;&#x2F;login&gt;
        &lt;register v-else&gt;&lt;&#x2F;register&gt;
    &lt;&#x2F;keep-alive&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="16-依赖注入Provide、inject"><a href="#16-依赖注入Provide、inject" class="headerlink" title="16.依赖注入Provide、inject"></a>16.依赖注入Provide、inject</h2><p>导入：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>provide<span class="token punctuation">,</span> inject<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>根组件注入数据后，所有子组件都可以访问到</p>
<p><code>provide(&#39;data&#39;, data)</code></p>
<p>函数两个参数值：键，值</p>
<p>father.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-07 17:03:11 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-07 17:36:55
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123;provide, inject,reactive&#125; from &#39;vue&#39;
import child1 from &#39;.&#x2F;child1.vue&#39;

let data &#x3D;reactive(&#123;
    name: &#39;kif&#39;
&#125;)
provide(&#39;data&#39;, data)

&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;main&quot;&gt;

        main
        根组件数据：&#123;&#123;data&#125;&#125;
        &lt;div class&#x3D;&quot;child1&quot;&gt;
            &lt;child1 &#x2F;&gt;

        &lt;&#x2F;div&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.main &#123;
    background-color: blueviolet;
    width: 300px;
    height: 300px;
&#125;

.child1 &#123;
    background-color: green;
    width: 200px;
    height: 200px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>child1.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-07 17:03:25 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-07 17:38:49
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import child2 from &#39;.&#x2F;child2.vue&#39;
import &#123; provide, inject, reactive &#125; from &#39;vue&#39;
&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-07 17:03:25 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-07 17:38:49
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import child2 from &#39;.&#x2F;child2.vue&#39;
import &#123; provide, inject, reactive &#125; from &#39;vue&#39;
let d &#x3D; inject(&#39;data&#39;, reactive(&#123;
    name: &#39;kif&#39;
&#125;))
const change &#x3D; () &#x3D;&gt; &#123;
    d.name &#x3D; &#39;kif1&#39;
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;child&quot;&gt;
        child1
        一级子组件拿到数据：&#123;&#123; d &#125;&#125;
        &lt;button @click&#x3D;&quot;change&quot;&gt;change&lt;&#x2F;button&gt;
        &lt;div class&#x3D;&quot;child2&quot;&gt;
            &lt;child2 &#x2F;&gt;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.child2 &#123;
    background-color: red;
    width: 100px;
    height: 100px;
&#125;
&lt;&#x2F;style&gt;
const change &#x3D; () &#x3D;&gt; &#123;
    d.name &#x3D; &#39;kif1&#39;
&#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;child&quot;&gt;
        child1
        一级子组件拿到数据：&#123;&#123; d &#125;&#125;
        &lt;button @click&#x3D;&quot;change&quot;&gt;change&lt;&#x2F;button&gt;
        &lt;div class&#x3D;&quot;child2&quot;&gt;
            &lt;child2 &#x2F;&gt;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.child2 &#123;
    background-color: red;
    width: 100px;
    height: 100px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'kif'</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>第二个参数是指定默认值，否则 <code>d.name </code>无法识别，d类型为unknoum</p>
<p>修改时所有界面的数据都会更改</p>
<p> child2.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-07 17:03:37 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-07 17:06:50
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
&lt;&#x2F;script&gt;
&lt;template&gt;
&lt;div class&#x3D;&quot;child&quot;&gt;
    child2
&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="17-兄弟组件传参"><a href="#17-兄弟组件传参" class="headerlink" title="17.兄弟组件传参"></a>17.兄弟组件传参</h2><h3 id="17-1-借助父组件"><a href="#17-1-借助父组件" class="headerlink" title="17.1 借助父组件"></a>17.1 借助父组件</h3><p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import child1 from &#39;.&#x2F;child1.vue&#39;
import child2 from &#39;.&#x2F;child2.vue&#39;
import &#123;ref &#125; from &#39;vue&#39;

let dataD &#x3D;ref(false)

const getData&#x3D;(data:boolean)&#x3D;&gt;&#123;
    dataD.value&#x3D; data
    console.log(dataD)
&#125;


&lt;&#x2F;script&gt;

&lt;template&gt;
    &lt;div class&#x3D;&quot;index&quot;&gt;
        index:
      
        &#123;&#123;dataD&#125;&#125;
    &lt;&#x2F;div&gt;


    &lt;div class&#x3D;&quot;child1&quot;&gt;
        child1：
        &lt;child1  @on-click&#x3D;&#39;getData&#39; &#x2F;&gt;
    &lt;&#x2F;div&gt;
    &lt;div class&#x3D;&quot;child2&quot;&gt;
        child2：
        &lt;child2 :data&#x3D;&quot;dataD&quot; &#x2F;&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.index&#123;
    background-color: blueviolet;
    width: 300px;
    height: 300px;
    border: 1px solid red;
&#125;
.child1&#123;
    background-color: green;
    width: 200px;
    height: 200px;
    border: 1px solid red;
    float:left;
&#125;
.child2&#123;
    background-color: blue;
    width: 200px;
    height: 200px;
    border: 1px solid red;
    float:left;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件1：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import &#123; reactive, ref, watch &#125; from &#39;vue&#39;
let data &#x3D;ref(false)

const emit &#x3D; defineEmits([&#39;on-click&#39;])


const bu &#x3D; () &#x3D;&gt; &#123;
    data.value &#x3D; !data.value
    emit(&#39;on-click&#39;, data)
&#125;


&lt;&#x2F;script&gt;

&lt;template&gt;
    child1
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;button @click&#x3D;&quot;bu&quot;&gt;
            派发
        &lt;&#x2F;button&gt;
        &#123;&#123;data&#125;&#125;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件2：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

type props &#x3D; &#123;
    data: boolean
&#125;
defineProps&lt;props&gt;()

&lt;&#x2F;script&gt;

&lt;template&gt;
    child2
    &#123;&#123; data &#125;&#125;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件1 通过emits 将数据给到父组件，父组件接收后给到子组件2，子组件2 通过props接受</p>
<h3 id="17-2-eventbus"><a href="#17-2-eventbus" class="headerlink" title="17.2 eventbus"></a>17.2 eventbus</h3><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token comment">/*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-09 11:38:25 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-09 11:38:25 
 */</span>
<span class="token keyword">type</span> <span class="token class-name">BusClass</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token function-variable function">emit</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">,</span>
    <span class="token function-variable function">on</span><span class="token operator">:</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">type</span> <span class="token class-name">PramsKey</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">List</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> PramsKey<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">></span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">implements</span> <span class="token class-name">BusClass</span> <span class="token punctuation">&#123;</span>
    list<span class="token operator">:</span> List
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bus created'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">emit</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">emit </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> emitName<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        emitName<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>fn <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">on</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> fun<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">Function</span><span class="token operator">></span>  <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        fun<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> fun

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>index.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

import A from &#39;.&#x2F;a.vue&#39;
import B from &#39;.&#x2F;b.vue&#39;

&lt;&#x2F;script&gt;

&lt;template&gt;
    eventBus
    &lt;div class&#x3D;&quot;a&quot;&gt;
        &lt;A &#x2F;&gt;
    &lt;&#x2F;div&gt;
    &lt;div class&#x3D;&quot;b&quot;&gt;
        &lt;B &#x2F;&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
.a &#123;
    background-color: red;
    width: 100px;
    height: 100px;
    border: 1pxx solid red;
&#125;

.b &#123;
    background-color: blue;
    width: 100px;
    height: 100px;
    border: 1pxx solid blue;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>a.vue:</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-09 11:37:57 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-09 11:37:57 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import Bus from &#39;..&#x2F;..&#x2F;bus&#39;
import &#123; ref &#125; from &#39;vue&#39;




let Flag &#x3D; (false)
 const emit &#x3D; () &#x3D;&gt; &#123;
     Flag &#x3D; !Flag
     Bus.emit(&#39;on-click&#39;, Flag)
 &#125;


&lt;&#x2F;script&gt;

&lt;template&gt;
    A
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;button @click&#x3D;&quot;emit&quot;&gt;click&lt;&#x2F;button&gt;
        &#123;&#123; Flag &#125;&#125;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>b.vue:</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-09 11:39:33 
 * @Last Modified by:   kif kif101001000@163.com  
 * @Last Modified time: 2022-06-09 11:39:33 
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import Bus from &#39;..&#x2F;..&#x2F;bus&#39;


import &#123; ref &#125; from &#39;vue&#39;
let Flag &#x3D; ref(false)
Bus.on(&#39;on-click&#39;, (flag: boolean) &#x3D;&gt; &#123;
    Flag.value &#x3D; flag
&#125;)

&lt;&#x2F;script&gt;

&lt;template&gt;
    B
    &#123;&#123;Flag&#125;&#125;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="17-3-mitt"><a href="#17-3-mitt" class="headerlink" title="17.3 mitt"></a>17.3 mitt</h3><h4 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h4><pre class="line-numbers language-none"><code class="language-none">npm install --save mitt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="全局注册：main-ts"><a href="#全局注册：main-ts" class="headerlink" title="全局注册：main.ts"></a>全局注册：main.ts</h4><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> <span class="token string">'./assets/css/reset.less'</span>
<span class="token keyword">import</span> card <span class="token keyword">from</span> <span class="token string">'./components/card/index.vue'</span>

<span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">'mitt'</span>
<span class="token keyword">const</span> Mit <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'vue'</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ComponentCustomProps</span> <span class="token punctuation">&#123;</span>
        $Bus<span class="token operator">:</span> <span class="token keyword">typeof</span> Mit
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$Bus <span class="token operator">=</span> Mit

app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'card'</span><span class="token punctuation">,</span> card<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="使用："><a href="#使用：" class="headerlink" title="使用："></a>使用：</h4><h5 id="emit"><a href="#emit" class="headerlink" title="emit:"></a>emit:</h5><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-09 11:37:57 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-09 11:40:50
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import Bus from &#39;..&#x2F;..&#x2F;bus&#39;
import &#123; ref &#125; from &#39;vue&#39;

import &#123; getCurrentInstance &#125; from &#39;vue&#39;
const instance &#x3D; getCurrentInstance()


let Flag &#x3D; (false)
&#x2F;&#x2F; const emit &#x3D; () &#x3D;&gt; &#123;
&#x2F;&#x2F;     Flag &#x3D; !Flag
&#x2F;&#x2F;     Bus.emit(&#39;on-click&#39;, Flag)
&#x2F;&#x2F; &#125;



const emit
    &#x3D; () &#x3D;&gt; &#123;
        instance?.proxy?.$Bus.emit(&#39;on-click&#39;, Flag)
    &#125;
&lt;&#x2F;script&gt;

&lt;template&gt;
    A
    &lt;div class&#x3D;&quot;main&quot;&gt;
        &lt;button @click&#x3D;&quot;emit&quot;&gt;click&lt;&#x2F;button&gt;
        &#123;&#123; Flag &#125;&#125;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;*
 * @Author: kif kif101001000@163.com 
 * @Date: 2022-06-09 11:39:33 
 * @Last Modified by: kif kif101001000@163.com 
 * @Last Modified time: 2022-06-09 11:41:30
 *&#x2F;
&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import Bus from &#39;..&#x2F;..&#x2F;bus&#39;
import &#123; ref &#125; from &#39;vue&#39;
import &#123; getCurrentInstance &#125; from &#39;vue&#39;
const instance &#x3D; getCurrentInstance()

instance?.proxy?.$Bus.on(&#39;on-click&#39;, (flag:boolean) &#x3D;&gt; &#123;
    console.log(flag)
&#125;)

let Flag &#x3D; ref(false)
&#x2F;&#x2F; Bus.on(&#39;on-click&#39;, (flag: boolean) &#x3D;&gt; &#123;
&#x2F;&#x2F;     Flag.value &#x3D; flag
&#x2F;&#x2F; &#125;)

&lt;&#x2F;script&gt;

&lt;template&gt;
    B
    &#123;&#123;Flag&#125;&#125;
&lt;&#x2F;template&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="18-unplugin-auto-import"><a href="#18-unplugin-auto-import" class="headerlink" title="18.unplugin-auto-import"></a>18.unplugin-auto-import</h2><p>github地址：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/antfu/unplugin-auto-import">https://github.com/antfu/unplugin-auto-import</a></p>
<p>可以避免重复引用ref，reactive等多次导入</p>
<p>安装：</p>
<pre class="line-numbers language-none"><code class="language-none">npm i -D unplugin-auto-import<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>vite.config.ts编辑：</p>
<pre class="line-numbers language-ts" data-language="ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>

<span class="token keyword">import</span> autoimport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span>


<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">autoimport</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 允许自动导入</span>
    imports<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    dts<span class="token operator">:</span><span class="token string">'src/autoimport.d.ts'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>src目录下就会生成 autoimport.d.ts</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">kif</div><div class="post-copyright__author_desc">梅虽逊雪三分白，雪却输梅一段香</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://wkif.gitee.io/post/21bc.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://wkif.gitee.io/post/21bc.html')">Vue3学习笔记</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://wkif.gitee.io/post/21bc.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Vue3学习笔记&amp;url=https://wkif.gitee.io/post/21bc.html&amp;pic=https://kifimg.oss-cn-beijing.aliyuncs.com/project/202206261120941.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wkif.gitee.io" target="_blank">Kifroom</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/vue3/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>vue3<span class="tagsPageCount">3</span></a><a class="post-meta__box__tags" href="/tags/vite/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>vite<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/Axios/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Axios<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/5883.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/project/202204241829561.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">webpack学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/post/266d.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/project/202204271735838.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Leetcode每日一题</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/post/4955.html" title="vue3+vite+axios中proxy跨域配置"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/project/202206261120941.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-06-26</div><div class="title">vue3+vite+axios中proxy跨域配置</div></div></a></div><div><a href="/post/6677.html" title="# Vue3  UI库&#x2F;相关工具&#x2F;可视化&#x2F;生态全分享"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/imgforhexo/202203310005873.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-10-14</div><div class="title"># Vue3  UI库&#x2F;相关工具&#x2F;可视化&#x2F;生态全分享</div></div></a></div><div><a href="/post/33d0.html" title="vue axios传中文参数导致乱码的解决方案"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2020-12-25</div><div class="title">vue axios传中文参数导致乱码的解决方案</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description"></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">kif</h1><div class="author-info__desc">梅虽逊雪三分白，雪却输梅一段香</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/wkif" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3"><span class="toc-number">1.</span> <span class="toc-text">Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Vite%E6%90%AD%E5%BB%BAVue3%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.</span> <span class="toc-text">1.Vite搭建Vue3项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85-Vite"><span class="toc-number">1.1.1.</span> <span class="toc-text">全局安装 Vite</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Vite-%E5%88%9B%E5%BB%BA-Vue3-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.2.</span> <span class="toc-text">使用 Vite 创建 Vue3 项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C"><span class="toc-number">1.1.3.</span> <span class="toc-text">运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vite"><span class="toc-number">1.1.4.</span> <span class="toc-text">vite</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%8EVUE2%E5%88%B0VUE3"><span class="toc-number">1.2.</span> <span class="toc-text">2.从VUE2到VUE3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.2.1.</span> <span class="toc-text">新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Composition-API"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E5%80%BC%E5%8F%98%E9%87%8F-ref"><span class="toc-number">1.2.1.1.1.</span> <span class="toc-text">单值变量 ref()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E5%BC%95%E7%94%A8"><span class="toc-number">1.2.1.1.2.</span> <span class="toc-text">元素引用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Teleport"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">Teleport</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Emits-Components-Option"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">Emits Components Option</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%BC%E5%BE%97%E6%B3%A8%E6%84%8F%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.3.</span> <span class="toc-text">值得注意的新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%86%99%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-number">1.3.1.</span> <span class="toc-text">重写双向绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96Vdom"><span class="toc-number">1.3.2.</span> <span class="toc-text">优化Vdom</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fragment"><span class="toc-number">1.3.3.</span> <span class="toc-text">fragment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tree-shaking"><span class="toc-number">1.3.4.</span> <span class="toc-text">Tree shaking</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue%E6%8C%87%E4%BB%A4%E8%A1%A5%E5%85%85"><span class="toc-number">1.4.</span> <span class="toc-text">vue指令补充</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-ref"><span class="toc-number">1.5.</span> <span class="toc-text">3.ref</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-ref"><span class="toc-number">1.5.1.</span> <span class="toc-text">3.1 ref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-isref"><span class="toc-number">1.5.2.</span> <span class="toc-text">3.2 isref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-shallowRef%EF%BC%8CtriggerRef"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.3 shallowRef，triggerRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-customRef"><span class="toc-number">1.5.4.</span> <span class="toc-text">3.4 customRef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-reactive"><span class="toc-number">1.6.</span> <span class="toc-text">4.reactive</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-reactive"><span class="toc-number">1.6.1.</span> <span class="toc-text">4.1 reactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-readonly"><span class="toc-number">1.6.2.</span> <span class="toc-text">4.2 readonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-shallowReactive"><span class="toc-number">1.6.3.</span> <span class="toc-text">4.3 shallowReactive</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-to"><span class="toc-number">1.7.</span> <span class="toc-text">5.to</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-toRef"><span class="toc-number">1.7.1.</span> <span class="toc-text">5.1 toRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-torefs"><span class="toc-number">1.7.2.</span> <span class="toc-text">5.2 torefs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-toRaw"><span class="toc-number">1.7.3.</span> <span class="toc-text">5.3 toRaw</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-computed"><span class="toc-number">1.8.</span> <span class="toc-text">6.计算属性 computed</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="toc-number">1.8.0.0.0.1.</span> <span class="toc-text">案例：购物车</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%9B%91%E5%90%AC%E5%B1%9E%E6%80%A7-watch"><span class="toc-number">1.9.</span> <span class="toc-text">7.监听属性 watch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%BB%84%E4%BB%B6%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.10.</span> <span class="toc-text">8.组件和生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1%E7%BB%84%E4%BB%B6"><span class="toc-number">1.10.1.</span> <span class="toc-text">8.1组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.10.2.</span> <span class="toc-text">8.2组件生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-onBrforeMount"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">8.2.1 onBrforeMount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2-onMounted"><span class="toc-number">1.10.2.2.</span> <span class="toc-text">8.2.2 onMounted</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-onBeforeUpdate"><span class="toc-number">1.10.2.3.</span> <span class="toc-text">8.2.3 onBeforeUpdate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-4-onUpdated"><span class="toc-number">1.10.2.4.</span> <span class="toc-text">8.2.4 onUpdated</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-5-onbeforeUnmount"><span class="toc-number">1.10.2.5.</span> <span class="toc-text">8.2.5 onbeforeUnmount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-6-onUnmount"><span class="toc-number">1.10.2.6.</span> <span class="toc-text">8.2.6 onUnmount</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC"><span class="toc-number">1.11.</span> <span class="toc-text">9.组件传值</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%B8%B8%E8%A7%84%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="toc-number">1.11.0.0.0.1.</span> <span class="toc-text">案例：常规页面布局</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-defineProps"><span class="toc-number">1.11.1.</span> <span class="toc-text">9.1 defineProps</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.11.1.1.</span> <span class="toc-text">简单数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.11.1.2.</span> <span class="toc-text">复杂数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E5%80%BC%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">1.11.1.3.</span> <span class="toc-text">可选值默认值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-defineEmits"><span class="toc-number">1.11.2.</span> <span class="toc-text">9.2 defineEmits</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-defineExpose"><span class="toc-number">1.11.3.</span> <span class="toc-text">9.3 defineExpose</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BB%84%E4%BB%B6"><span class="toc-number">1.12.</span> <span class="toc-text">10.组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-number">1.12.1.</span> <span class="toc-text">10.1全局组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">1.12.2.</span> <span class="toc-text">10.2局部组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6"><span class="toc-number">1.12.3.</span> <span class="toc-text">10.3 递归组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">1.12.4.</span> <span class="toc-text">10.4 动态组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%8F%92%E6%A7%BDslot"><span class="toc-number">1.13.</span> <span class="toc-text">11.插槽slot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%8C%BF%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.1.</span> <span class="toc-text">11.1 匿名插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.2.</span> <span class="toc-text">11.2 具名插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E6%8F%92%E6%A7%BD%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.13.3.</span> <span class="toc-text">11.3 插槽作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-%E5%8A%A8%E6%80%81%E6%8F%92%E6%A7%BD"><span class="toc-number">1.13.4.</span> <span class="toc-text">11.4 动态插槽</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%E3%80%81%E4%BB%A3%E7%A0%81%E5%88%86%E5%8C%85%E3%80%81suspense"><span class="toc-number">1.14.</span> <span class="toc-text">12.异步组件、代码分包、suspense</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#defineAsyncComponent"><span class="toc-number">1.14.1.</span> <span class="toc-text">defineAsyncComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Suspense"><span class="toc-number">1.14.2.</span> <span class="toc-text">Suspense</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-axios%E5%BC%95%E5%85%A5"><span class="toc-number">1.15.</span> <span class="toc-text">13.axios引入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-teleport"><span class="toc-number">1.16.</span> <span class="toc-text">14.teleport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-keep-alive"><span class="toc-number">1.17.</span> <span class="toc-text">15.keep-alive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5Provide%E3%80%81inject"><span class="toc-number">1.18.</span> <span class="toc-text">16.依赖注入Provide、inject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">1.19.</span> <span class="toc-text">17.兄弟组件传参</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-%E5%80%9F%E5%8A%A9%E7%88%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">1.19.1.</span> <span class="toc-text">17.1 借助父组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-eventbus"><span class="toc-number">1.19.2.</span> <span class="toc-text">17.2 eventbus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-mitt"><span class="toc-number">1.19.3.</span> <span class="toc-text">17.3 mitt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%EF%BC%9A"><span class="toc-number">1.19.3.1.</span> <span class="toc-text">安装：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C%EF%BC%9Amain-ts"><span class="toc-number">1.19.3.2.</span> <span class="toc-text">全局注册：main.ts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.19.3.3.</span> <span class="toc-text">使用：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#emit"><span class="toc-number">1.19.3.3.1.</span> <span class="toc-text">emit:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-unplugin-auto-import"><span class="toc-number">1.20.</span> <span class="toc-text">18.unplugin-auto-import</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/kif1.html" title="Math.toFixed中的四舍五入问题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kiftravel.oss-cn-beijing.aliyuncs.com/img/202308280943672.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Math.toFixed中的四舍五入问题"/></a><div class="content"><a class="title" href="/post/kif1.html" title="Math.toFixed中的四舍五入问题">Math.toFixed中的四舍五入问题</a><time datetime="2023-08-28T03:09:00.000Z" title="发表于 2023-08-28 11:09:00">2023-08-28</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/post/8a59.html" title="React系列：Rematch">React系列：Rematch</a><time datetime="2023-08-05T03:31:00.000Z" title="发表于 2023-08-05 11:31:00">2023-08-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/9aee.html" title="kif的neovim设置"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191059908.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kif的neovim设置"/></a><div class="content"><a class="title" href="/post/9aee.html" title="kif的neovim设置">kif的neovim设置</a><time datetime="2023-04-19T02:58:00.000Z" title="发表于 2023-04-19 10:58:00">2023-04-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/5fbb.html" title="win11中powershell设置v2ray代理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191057671.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="win11中powershell设置v2ray代理"/></a><div class="content"><a class="title" href="/post/5fbb.html" title="win11中powershell设置v2ray代理">win11中powershell设置v2ray代理</a><time datetime="2023-04-19T02:54:00.000Z" title="发表于 2023-04-19 10:54:00">2023-04-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/f788.html" title="lerna+yarn workspace+monorepo项目的最佳实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifimg.oss-cn-beijing.aliyuncs.com/img/202301261903204.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="lerna+yarn workspace+monorepo项目的最佳实践"/></a><div class="content"><a class="title" href="/post/f788.html" title="lerna+yarn workspace+monorepo项目的最佳实践">lerna+yarn workspace+monorepo项目的最佳实践</a><time datetime="2023-01-26T11:01:00.000Z" title="发表于 2023-01-26 19:01:00">2023-01-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="kif" target="_blank">kif</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">66</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">17</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.kifroom.icu/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/ico.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://kifnav.kifroom.icu/" title="kifNav"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://kifnav.kifroom.icu/favicon.ico" alt="kifNav"/><span class="back-menu-item-text">kifNav</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/links/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/message-board/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Axios/" style="font-size: 0.88rem;">Axios<sup>3</sup></a><a href="/tags/C-S-N/" style="font-size: 0.88rem;">C.S.N<sup>1</sup></a><a href="/tags/Ckeditor4/" style="font-size: 0.88rem;">Ckeditor4<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>3</sup></a><a href="/tags/Django/" style="font-size: 0.88rem;">Django<sup>1</sup></a><a href="/tags/Excel/" style="font-size: 0.88rem;">Excel<sup>1</sup></a><a href="/tags/Oracle/" style="font-size: 0.88rem;">Oracle<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>1</sup></a><a href="/tags/RSA/" style="font-size: 0.88rem;">RSA<sup>1</sup></a><a href="/tags/SQL/" style="font-size: 0.88rem;">SQL<sup>1</sup></a><a href="/tags/VS-code/" style="font-size: 0.88rem;">VS code<sup>1</sup></a><a href="/tags/Vue-js/" style="font-size: 0.88rem;">Vue.js<sup>2</sup></a><a href="/tags/Win/" style="font-size: 0.88rem;">Win<sup>3</sup></a><a href="/tags/dom-to-image/" style="font-size: 0.88rem;">dom-to-image<sup>1</sup></a><a href="/tags/express/" style="font-size: 0.88rem;">express<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>5</sup></a><a href="/tags/javascript/" style="font-size: 0.88rem;">javascript<sup>7</sup></a><a href="/tags/kali/" style="font-size: 0.88rem;">kali<sup>1</sup></a><a href="/tags/leetcode/" style="font-size: 0.88rem;">leetcode<sup>1</sup></a><a href="/tags/lerna/" style="font-size: 0.88rem;">lerna<sup>1</sup></a><a href="/tags/linux/" style="font-size: 0.88rem;">linux<sup>1</sup></a><a href="/tags/matery/" style="font-size: 0.88rem;">matery<sup>2</sup></a><a href="/tags/monorepo/" style="font-size: 0.88rem;">monorepo<sup>1</sup></a><a href="/tags/node-js/" style="font-size: 0.88rem;">node.js<sup>2</sup></a><a href="/tags/pinia/" style="font-size: 0.88rem;">pinia<sup>1</sup></a><a href="/tags/pyqt/" style="font-size: 0.88rem;">pyqt<sup>1</sup></a><a href="/tags/this/" style="font-size: 0.88rem;">this<sup>1</sup></a><a href="/tags/vite/" style="font-size: 0.88rem;">vite<sup>2</sup></a><a href="/tags/vue3/" style="font-size: 0.88rem;">vue3<sup>3</sup></a><a href="/tags/webpack/" style="font-size: 0.88rem;">webpack<sup>1</sup></a><a href="/tags/workspace/" style="font-size: 0.88rem;">workspace<sup>1</sup></a><a href="/tags/%E5%85%BC%E5%AE%B9%E6%80%A7/" style="font-size: 0.88rem;">兼容性<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" style="font-size: 0.88rem;">开发规范<sup>2</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 0.88rem;">微信小程序<sup>4</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">操作系统<sup>3</sup></a><a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 0.88rem;">数组<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E4%BE%BF%E7%AD%BE/" style="font-size: 0.88rem;">网站便签<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.5",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 kif 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'b7AAVOuWhWIEQsQfviV12FRp-gzGzoHsz',
      appKey: 'TYFSaiPIN5WAmTU3nv8wG8wb',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://b7AAVOuW.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'b7AAVOuWhWIEQsQfviV12FRp-gzGzoHsz',
        "X-LC-Key": 'TYFSaiPIN5WAmTU3nv8wG8wb',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "kif101001000@163.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>