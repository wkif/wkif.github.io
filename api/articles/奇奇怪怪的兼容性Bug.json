{"title":"奇奇怪怪的兼容性Bug","uid":"311754d371a04ae5df8f53f2dae3f317","slug":"奇奇怪怪的兼容性Bug","date":"2022-12-05T16:28:00.000Z","updated":"2022-12-05T16:37:49.970Z","comments":true,"path":"api/articles/奇奇怪怪的兼容性Bug.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202212060030103.png","content":"<h2 id=\"IOS-不支持this-router-go\"><a href=\"#IOS-不支持this-router-go\" class=\"headerlink\" title=\"IOS 不支持this.$router.go\"></a>IOS 不支持this.$router.go</h2><p>项目中遇到需要刷新当前界面，就使用了this.$router.go(0)，结果ios端不生效,this.router.go(0) 和 window.location.reload() 都是刷新当前页面的方法,Vue 写H5页面时，用 this.$router.go(0); 方法刷新当前页面，在苹果手机失效，安卓、pc、开发工具等都可以改用 <em><strong>*window.location.reload()*</strong></em> 问题解决！</p>\n<h2 id=\"微信端input-type-x3D-file-无法上传图片\"><a href=\"#微信端input-type-x3D-file-无法上传图片\" class=\"headerlink\" title=\"微信端input type&#x3D;file 无法上传图片\"></a>微信端input type&#x3D;file 无法上传图片</h2><p>在做一个上传头像功能时</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&lt;input id&#x3D;&quot;photo&quot; type&#x3D;&quot;file&quot; accept&#x3D;&quot;image&#x2F;jpeg, image&#x2F;x-png, image&#x2F;gif&quot; capture&#x3D;&quot;camera&quot;&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>这段代码在非微信浏览器内能选中图片并上传，而在微信浏览器内就失效了，查了各种资料并没有找个解决方案，一次 偶然的机会将代码改成</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&lt;input id&#x3D;&quot;photo&quot; type&#x3D;&quot;file&quot; accept&#x3D;&quot;image&#x2F;*&quot; capture&#x3D;&quot;camera&quot;&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>发现奇迹般的在微信里成功了。</p>\n<p>自己猜测，可能是 accept&#x3D;”image&#x2F;jpeg, image&#x2F;x-png, image&#x2F;gif” 这个属性在微信里寻找手机里的图片的时候类型不匹配，导致上传失败，将其改成 accept&#x3D;”image&#x2F;*” 这个时候就能成功。可能是微信浏览器内对input的配置问题。</p>\n<p>最后发现可以不要 capture&#x3D;”camera” 也能调用摄像头。最后代码为</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&lt;input id&#x3D;&quot;photo&quot; type&#x3D;&quot;file&quot; accept&#x3D;&quot;image&#x2F;*&quot;&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>或者使用JSSDK</p>\n<p>参考：<a href=\"https://cloud.tencent.com/developer/article/1399109\">微信端input type&#x3D;file 无法上传图片</a></p>\n<p>待續……</p>\n","feature":true,"text":"IOS 不支持this.$router.go项目中遇到需要刷新当前界面，就使用了this.$router.go(0)，结果ios端不生效,this.router.go(0) 和 window.location.reload() 都是刷新当前页面的方法,Vue 写H5页面时，用 t...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"开发笔记","slug":"开发笔记","count":2,"path":"api/categories/开发笔记.json"}],"tags":[{"name":"兼容性","slug":"兼容性","count":1,"path":"api/tags/兼容性.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#IOS-%E4%B8%8D%E6%94%AF%E6%8C%81this-router-go\"><span class=\"toc-text\">IOS 不支持this.$router.go</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BE%AE%E4%BF%A1%E7%AB%AFinput-type-x3D-file-%E6%97%A0%E6%B3%95%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87\"><span class=\"toc-text\">微信端input type&#x3D;file 无法上传图片</span></a></li></ol>","author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"vue3+vite+ts配置eslint+husky","uid":"59055f5d64cb45bdfcbaa23146e2d50d","slug":"vue3-vite-ts配置eslint-husky","date":"2022-11-19T08:06:00.000Z","updated":"2022-11-19T08:09:05.319Z","comments":true,"path":"api/articles/vue3-vite-ts配置eslint-husky.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202211191608596.jpg","text":"vue3+vite+ts配置eslint+husky创建项目命令 yarn create vite vue3-vite-ts –template vue-ts eslint代码风格检查，prettier进行格式化代码 安装相关依赖 ； yarn add eslint eslint...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"开发记录","slug":"开发记录","count":3,"path":"api/categories/开发记录.json"}],"tags":[{"name":"开发规范","slug":"开发规范","count":2,"path":"api/tags/开发规范.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"feature":true}}