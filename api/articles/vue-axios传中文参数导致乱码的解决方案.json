{"title":"vue axios传中文参数导致乱码的解决方案","uid":"77ab0fbeb021db0c986d25c4c83eb7f1","slug":"vue-axios传中文参数导致乱码的解决方案","date":"2020-12-25T09:59:00.000Z","updated":"2020-12-25T10:15:28.383Z","comments":true,"path":"api/articles/vue-axios传中文参数导致乱码的解决方案.json","keywords":null,"cover":[],"content":"<h2 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">var that &#x3D; this;\n         var name &#x3D; that.signform.signname;\n         var username &#x3D; that.signform.signusername;\n         var password &#x3D; that.signform.signpassword;\n         var user_type &#x3D; that.sign_user_type;\n         var email &#x3D; that.signform.mailAddress;\n         var studentid &#x3D; that.signform.studentid;\n         this.$axios(&#123;\n           method: &quot;post&quot;,\n           url:\n             this.$api +\n             &#96;&#x2F;Register&#x2F;?name&#x3D;$&#123;name&#125;&amp;username&#x3D;$&#123;username&#125;&amp;password&#x3D;$&#123;password&#125;&amp;user_type&#x3D;$&#123;user_type&#125;&amp;email&#x3D;$&#123;email&#125;&amp;studentid&#x3D;$&#123;studentid&#125;&#96;, &#x2F;&#x2F;利用了字符串模板来携带id\n         &#125;)\n           .then((res) &#x3D;&gt; &#123;\n             console.log(res);\n             this.changeCode();\n           &#125;)\n           .catch((req) &#x3D;&gt; &#123;\n             &#x2F;&#x2F; console.log(req);\n           &#125;);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>在vue axios post 请求注册用户时，刚开始通过如上字符拼接形式调用api时，在服务器后端出现了utf-8汉语乱码：</p>\n<p><img src=\"https://gitee.com/wkkif/PicGoimg/raw/master/img/20201225180537.png\"></p>\n<p>图中name字段本是中文，服务器后端出现了utf-8汉语乱码，</p>\n<p>查询bing后有如下几种解决办法：</p>\n<p><img src=\"https://gitee.com/wkkif/PicGoimg/raw/master/img/20201225180735.png\"></p>\n<p>其中有添加</p>\n<ol>\n<li>headers: {</li>\n<li>​            “Content-Type”: “application&#x2F;x-www-form-urlencoded;charset&#x3D;UTF-8”</li>\n<li>​                                    },</li>\n</ol>\n<p>但个人实验了一下没有解决问题，</p>\n<p>之后又试了下js函数把字符转换，没有解决问题。</p>\n<h2 id=\"方法：\"><a href=\"#方法：\" class=\"headerlink\" title=\"方法：\"></a>方法：</h2><p>使用vue axios推荐的vue-axios的使用及其get与post网络请求</p>\n<p>即：</p>\n<p>get请求时用如下方式代替字符拼接方式</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\n&#x2F;&#x2F; Optionally the request above could also be done as\naxios.get(&#39;&#x2F;user&#39;, &#123;\n    params: &#123;\n      ID: 12345\n    &#125;\n  &#125;)\n  .then(function (response) &#123;\n    console.log(response);\n  &#125;)\n  .catch(function (error) &#123;\n    console.log(error);\n  &#125;);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>post请求时一样：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">axios.post(&#39;&#x2F;user&#39;, &#123;\n    firstName: &#39;Fred&#39;,\n    lastName: &#39;Flintstone&#39;\n  &#125;)\n  .then(function (response) &#123;\n    console.log(response);\n  &#125;)\n  .catch(function (error) &#123;\n    console.log(error);\n  &#125;);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p>所以项目中最终采取的代码：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\nlet data &#x3D; new FormData();\ndata.append(&quot;name&quot;, this.signform.signname);\ndata.append(&quot;username&quot;, this.signform.signusername);\ndata.append(&quot;password&quot;, this.signform.signpassword);\ndata.append(&quot;user_type&quot;, this.sign_user_type);\ndata.append(&quot;email&quot;, this.signform.mailAddress);\ndata.append(&quot;studentid&quot;, this.signform.studentid);\nconsole.log(data);\nvar that &#x3D; this;\naxios\n  .post(this.$api + &quot;&#x2F;Register&#x2F;&quot;, data) &#x2F;&#x2F;以slash结尾\n  .then(function (response) &#123;\n    console.log(response.data);\n  &#125;)\n  .catch((err) &#x3D;&gt; &#123;&#125;);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://gitee.com/wkkif/PicGoimg/raw/master/img/20201225181426.png\"></p>\n<p>注意的时此时后台时没有显示字段的，但是数据库里已经加入了（注册功能哈）。</p>\n","text":"问题描述var that &#x3D; this; var name &#x3D; that.signform.signname; var username &#x3D; that.signform.signusername; var password &#x3D; that.s...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"Vue","slug":"Vue","count":1,"path":"api/tags/Vue.json"},{"name":"Axios","slug":"Axios","count":3,"path":"api/tags/Axios.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0\"><span class=\"toc-text\">问题描述</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%96%B9%E6%B3%95%EF%BC%9A\"><span class=\"toc-text\">方法：</span></a></li></ol>","author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"C语言知识点","date":"2021-01-05T06:52:00.000Z","updated":"2022-03-30T16:10:12.416Z","comments":true,"path":"api/articles/C语言知识点.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/wkif/imgforTeachingDemo/202203310008758.jpg","text":"输入未知长度字符数组#include &lt;stdio.h&gt; int main() &#123; char array_num[100] ; int i &#x3D; 0, length; do &#123; scanf(&quot;%c&quot;, &amp;arra...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"19 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":22,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"C语言","slug":"C语言","count":2,"path":"api/tags/C语言.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}},"next_post":{"title":"操作系统之调度","uid":"6636482fc925ef3fdf260b6b326d9fbf","slug":"操作系统之调度","date":"2020-12-09T13:40:00.000Z","updated":"2022-03-30T15:59:38.731Z","comments":true,"path":"api/articles/操作系统之调度.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforhexo/20201202142647.jpg","text":"调度调度的基本概念调度研究的问题：当有一堆任务要处理，但由于资源有限，这些事情没法同时处理。这就需要确定某种规则来决定处理这些任务的顺序，这就是调度研究的问题。 举个有味道的例子：现在有4个人要上厕所(他们几乎同时到达)，他们分别需要使用厕所3分钟、10分钟、1分钟、4分钟。但是...","link":"","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":22,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"操作系统","slug":"操作系统","count":3,"path":"api/tags/操作系统.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}}}