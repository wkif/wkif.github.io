{"title":"win11中powershell设置v2ray代理","uid":"1f1176a948487c40a826ad4a5db80a43","slug":"win11中powershell设置v2ray代理","date":"2023-04-19T02:54:00.000Z","updated":"2023-04-19T03:06:48.840Z","comments":true,"path":"api/articles/win11中powershell设置v2ray代理.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191057671.png","content":"<p>本文用socks5协议进行设置代理，用户可以根据自己的需求将socks5替换http和https 协议自行设置<br><strong>本文测试需要打开代理软件，打开即可，无需在软件上开启代理。</strong></p>\n<h2 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h2><h4 id=\"cmd\"><a href=\"#cmd\" class=\"headerlink\" title=\"cmd\"></a>cmd</h4><p>设置<strong>临时</strong>代理（关闭cmd即设置的代理消失）<br><code>set all_proxy=socks5://127.0.0.1:10808</code> (<strong>端口号为你代理软件socks5协议的端口</strong>)<br>删除临时代理<br><code>set all_proxy=</code><br>查看当前环境变量<br><code>set</code><br>查看当前公网ip判断代理是否成功<br><code>curl cip.cc</code></p>\n<h4 id=\"powershell\"><a href=\"#powershell\" class=\"headerlink\" title=\"powershell\"></a><a href=\"https://so.csdn.net/so/search?q=powershell&spm=1001.2101.3001.7020\">powershell</a></h4><p>设置<strong>临时</strong>代理（关闭powershell即设置的代理消失）<br><code>$env:all_proxy=&quot;socks5://127.0.0.1:10808&quot;</code> (<strong>端口号为你代理软件socks5协议的端口</strong>)<br>删除当前临时代理<br><code>$env:all_proxy=&quot;&quot;</code><br>查看当前环境变量<br><code>ls env:*</code><br>暂不知晓curl 和 ping层面上检测代理是否成功,设置完临时代理，通过命令行界面已成功获得下载相关速度</p>\n<h4 id=\"cmd和powershell设置永久代理\"><a href=\"#cmd和powershell设置永久代理\" class=\"headerlink\" title=\"cmd和powershell设置永久代理\"></a>cmd和powershell设置永久代理</h4><p>单击我的电脑属性&#x3D;》选择高级系统设置&#x3D;》选择环境变量&#x3D;》选择系统变量&#x3D;》选择新建<br>新建all_proxy，值设置为socks5:&#x2F;&#x2F;127.0.0.1:10808<br><img src=\"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191055167.png\" alt=\"在这里插入图片描述\"><br>保存即可保存为永久代理</p>\n<h4 id=\"快捷代码设置临时命令行代理\"><a href=\"#快捷代码设置临时命令行代理\" class=\"headerlink\" title=\"快捷代码设置临时命令行代理\"></a>快捷代码设置临时命令行代理</h4><h5 id=\"cmd-1\"><a href=\"#cmd-1\" class=\"headerlink\" title=\"cmd\"></a>cmd</h5><p>可以 设置<strong>临时</strong>代理保存为cmd_setproxy.bat如下：<br><img src=\"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191106873.png\" alt=\"在这里插入图片描述\"><br>删除<strong>临时</strong>代理如下<br><img src=\"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191106929.png\" alt=\"在这里插入图片描述\"><br><em><strong>将两个bat保存为同一路径下，将路径粘贴入系统变量的PATH中，即可设置成功</strong></em><br>输入cmd_setproxy即可设置成功<br><img src=\"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191055418.png\" alt=\"在这里插入图片描述\"></p>\n<h5 id=\"powershell-1\"><a href=\"#powershell-1\" class=\"headerlink\" title=\"powershell\"></a>powershell</h5><p>用管理员模式打开powershell<br><code>code $profile</code>（code表示用vscode打开$profile文件,$profile表示powershell的配置文件）</p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">function setproxy<span class=\"token punctuation\">&#123;</span>\n    $env<span class=\"token operator\">:</span>all_proxy<span class=\"token operator\">=</span><span class=\"token string\">\"socks5://127.0.0.1:10808\"</span>\n<span class=\"token punctuation\">&#125;</span>\n\nfunction unsetproxy<span class=\"token punctuation\">&#123;</span>\n    $env<span class=\"token operator\">:</span>unsetproxy<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token number\">1234567</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>保存完后 另外再开powershell如果出现<br>系统无法使用脚本的报错<br>用管理员打开的powershell运行<br><code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned</code><br>选择同意更改策略，如果需要具体更改相关策略选项可以到官网文档进行查看</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.2\">https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.2</a></p></blockquote>\n<p>保存完成 即可使用power shell使用setproxy快捷设置临时代理<br><img src=\"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202304191055372.png\" alt=\"在这里插入图片描述\"></p>\n","text":"本文用socks5协议进行设置代理，用户可以根据自己的需求将socks5替换http和https 协议自行设置本文测试需要打开代理软件，打开即可，无需在软件上开启代理。 windowscmd设置临时代理（关闭cmd即设置的代理消失）set all_proxy=socks5://1...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"工具","slug":"工具","count":2,"path":"api/categories/工具.json"}],"tags":[{"name":"v2ray","slug":"v2ray","count":1,"path":"api/tags/v2ray.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#windows\"><span class=\"toc-text\">windows</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#cmd\"><span class=\"toc-text\">cmd</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#powershell\"><span class=\"toc-text\">powershell</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#cmd%E5%92%8Cpowershell%E8%AE%BE%E7%BD%AE%E6%B0%B8%E4%B9%85%E4%BB%A3%E7%90%86\"><span class=\"toc-text\">cmd和powershell设置永久代理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%BF%AB%E6%8D%B7%E4%BB%A3%E7%A0%81%E8%AE%BE%E7%BD%AE%E4%B8%B4%E6%97%B6%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BB%A3%E7%90%86\"><span class=\"toc-text\">快捷代码设置临时命令行代理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#cmd-1\"><span class=\"toc-text\">cmd</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#powershell-1\"><span class=\"toc-text\">powershell</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"前端面试题目","uid":"4bd7150fd9e4dc678a3c2ce6062a159a","slug":"前端面试题目","date":"2022-03-31T00:42:00.000Z","updated":"2022-05-05T13:37:24.415Z","comments":true,"path":"api/articles/前端面试题目.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforhexo/202203310851324.jpg","text":"html基础1.自定义列表&lt;!DOCTYPE html> &lt;html lang=\"zh\"> &lt;head> &lt;meta charset=\"UTF-8\"> &lt;meta name=\"viewport\" content=\"width=device-width...","link":"","photos":[],"count_time":{"symbolsCount":"133k","symbolsTime":"2:01"},"categories":[],"tags":[{"name":"面试","slug":"面试","count":1,"path":"api/tags/面试.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"lerna+yarn workspace+monorepo项目的最佳实践","uid":"8194451e25c86b4d1b6b68c34d396a48","slug":"lerna-yarn-workspace-monorepo项目的最佳实践","date":"2023-01-26T11:01:00.000Z","updated":"2023-01-26T11:06:33.710Z","comments":true,"path":"api/articles/lerna-yarn-workspace-monorepo项目的最佳实践.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202301261903204.png","text":"1.monorepo 管理对于维护过多个package(功能相近)的同学来说，都会遇到一个选择题，这些 package 是放在一个仓库里维护还是放在多个仓库里单独维护。Multirepo 是比较传统的做法，即每一个 package 都单独用一个仓库来进行管理。Monorepo 是...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"开发笔记","slug":"开发笔记","count":3,"path":"api/categories/开发笔记.json"},{"name":"转载","slug":"开发笔记/转载","count":1,"path":"api/categories/开发笔记/转载.json"}],"tags":[{"name":"lerna","slug":"lerna","count":1,"path":"api/tags/lerna.json"},{"name":"workspace","slug":"workspace","count":1,"path":"api/tags/workspace.json"},{"name":"monorepo","slug":"monorepo","count":1,"path":"api/tags/monorepo.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}}}