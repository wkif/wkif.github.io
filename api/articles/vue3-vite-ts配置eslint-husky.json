{"title":"vue3+vite+ts配置eslint+husky","uid":"59055f5d64cb45bdfcbaa23146e2d50d","slug":"vue3-vite-ts配置eslint-husky","date":"2022-11-19T08:06:00.000Z","updated":"2022-11-19T08:09:05.319Z","comments":true,"path":"api/articles/vue3-vite-ts配置eslint-husky.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202211191608596.jpg","content":"<h1 id=\"vue3-vite-ts配置eslint-husky\"><a href=\"#vue3-vite-ts配置eslint-husky\" class=\"headerlink\" title=\"vue3+vite+ts配置eslint+husky\"></a>vue3+vite+ts配置<a href=\"https://so.csdn.net/so/search?q=eslint&spm=1001.2101.3001.7020\">eslint</a>+husky</h1><p>创建项目命令</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://so.csdn.net/so/search?q=yarn&spm=1001.2101.3001.7020\">yarn</a> create vite vue3-vite-ts –template vue-ts</p></blockquote>\n<h2 id=\"eslint代码风格检查，prettier进行格式化代码\"><a href=\"#eslint代码风格检查，prettier进行格式化代码\" class=\"headerlink\" title=\"eslint代码风格检查，prettier进行格式化代码\"></a>eslint代码风格检查，prettier进行格式化代码</h2><ol>\n<li><strong>安装相关依赖</strong> ；</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">yarn add eslint eslint<span class=\"token operator\">-</span>plugin<span class=\"token operator\">-</span>vue eslint<span class=\"token operator\">-</span>define<span class=\"token operator\">-</span>config <span class=\"token operator\">--</span>dev # eslink\nyarn add prettier eslint<span class=\"token operator\">-</span>plugin<span class=\"token operator\">-</span>prettier @vue<span class=\"token operator\">/</span>eslint<span class=\"token operator\">-</span>config<span class=\"token operator\">-</span>prettier <span class=\"token operator\">--</span>dev # prettire\nyarn add @vue<span class=\"token operator\">/</span>eslint<span class=\"token operator\">-</span>config<span class=\"token operator\">-</span>typescript @typescript<span class=\"token operator\">-</span>eslint<span class=\"token operator\">/</span>eslint<span class=\"token operator\">-</span>plugin @typescript<span class=\"token operator\">-</span>eslint<span class=\"token operator\">/</span>parser <span class=\"token operator\">--</span>dev # 对ts的支持<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<ol>\n<li><strong>编写对应的配置文件 .eslintrc.js</strong> ；</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">&#123;</span> defineConfig <span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'eslint-define-config'</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">/* 指定如何解析语法。*/</span>\n  <span class=\"token literal-property property\">parser</span><span class=\"token operator\">:</span> <span class=\"token string\">'vue-eslint-parser'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">/* 优先级低于parse的语法解析配置 */</span>\n  <span class=\"token literal-property property\">parserOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token literal-property property\">parser</span><span class=\"token operator\">:</span> <span class=\"token string\">'@typescript-eslint/parser'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//模块化方案</span>\n    <span class=\"token literal-property property\">sourceType</span><span class=\"token operator\">:</span> <span class=\"token string\">'module'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">env</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token literal-property property\">browser</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">es2021</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 解决 defineProps and defineEmits generate no-undef warnings</span>\n    <span class=\"token string-property property\">'vue/setup-compiler-macros'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">extends</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// https://github.com/vuejs/eslint-plugin-vue</span>\n    <span class=\"token comment\">// 'plugin:vue/vue3-essential',</span>\n    <span class=\"token comment\">// https://github.com/vuejs/eslint-config-standard</span>\n    <span class=\"token comment\">// 'standard'</span>\n    <span class=\"token string\">'plugin:vue/vue3-recommended'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'eslint:recommended'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'plugin:@typescript-eslint/recommended'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// typescript-eslint推荐规则,</span>\n    <span class=\"token string\">'prettier'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'plugin:prettier/recommended'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'./.eslintrc-auto-import.json'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 这是unplugin-auto-import/vite相关配置，自动引入vue相关api</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 解决 error  Component name \"index\" should always be multi-word  vue/multi-word-component-names</span>\n  <span class=\"token literal-property property\">overrides</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src/views/**/*.vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string-property property\">'vue/multi-word-component-names'</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">rules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 禁止使用 var</span>\n    <span class=\"token string-property property\">'no-var'</span><span class=\"token operator\">:</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">semi</span><span class=\"token operator\">:</span> <span class=\"token string\">'off'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 优先使用 interface 而不是 type</span>\n    <span class=\"token string-property property\">'@typescript-eslint/consistent-type-definitions'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'interface'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'@typescript-eslint/no-explicit-any'</span><span class=\"token operator\">:</span> <span class=\"token string\">'off'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 可以使用 any 类型</span>\n    <span class=\"token string-property property\">'@typescript-eslint/explicit-module-boundary-types'</span><span class=\"token operator\">:</span> <span class=\"token string\">'off'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 解决使用 require() Require statement not part of import statement. 的问题</span>\n    <span class=\"token string-property property\">'@typescript-eslint/no-var-requires'</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// https://github.com/typescript-eslint/typescript-eslint/blob/main/packages/eslint-plugin/docs/rules/ban-types.md</span>\n    <span class=\"token string-property property\">'@typescript-eslint/ban-types'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token literal-property property\">types</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token comment\">// add a custom message to help explain why not to use it</span>\n          <span class=\"token literal-property property\">Foo</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Don't use Foo because it is unsafe\"</span><span class=\"token punctuation\">,</span>\n\n          <span class=\"token comment\">// add a custom message, AND tell the plugin how to fix it</span>\n          <span class=\"token literal-property property\">String</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Use string instead'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">fixWith</span><span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n          <span class=\"token string-property property\">'&#123;&#125;'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Use object instead'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">fixWith</span><span class=\"token operator\">:</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 禁止出现未使用的变量</span>\n    <span class=\"token string-property property\">'@typescript-eslint/no-unused-vars'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">vars</span><span class=\"token operator\">:</span> <span class=\"token string\">'all'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">args</span><span class=\"token operator\">:</span> <span class=\"token string\">'after-used'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">ignoreRestSiblings</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'vue/html-indent'</span><span class=\"token operator\">:</span> <span class=\"token string\">'off'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 关闭此规则 使用 prettier 的格式化规则，</span>\n    <span class=\"token string-property property\">'vue/max-attributes-per-line'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'off'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 优先使用驼峰，element 组件除外</span>\n    <span class=\"token comment\">// 'vue/component-name-in-template-casing': [</span>\n    <span class=\"token comment\">//   'error',</span>\n    <span class=\"token comment\">//   'PascalCase',</span>\n    <span class=\"token comment\">//   &#123;</span>\n    <span class=\"token comment\">//     ignores: ['/^el-/', '/^router-/'],</span>\n    <span class=\"token comment\">//     registeredComponentsOnly: false,</span>\n    <span class=\"token comment\">//   &#125;,</span>\n    <span class=\"token comment\">// ],</span>\n    <span class=\"token comment\">// 强制使用驼峰</span>\n    <span class=\"token comment\">// camelcase: [\"error\", &#123; properties: \"always\" &#125;],</span>\n    <span class=\"token comment\">// 优先使用 const</span>\n    <span class=\"token string-property property\">'prefer-const'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token literal-property property\">destructuring</span><span class=\"token operator\">:</span> <span class=\"token string\">'any'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">ignoreReadBeforeAssign</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>.eslintignore</strong>不会对以下文件进行代码风格检查</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">build<span class=\"token comment\">/*.js\nsrc/assets\nnode_modules\npublic\ndist\nauto-import.d.ts\ncomponents.d.ts</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>.prettierrc</strong>具体规则官网自行查找，prettier主要是格式化代码</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"semi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"singleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"printWidth\"</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"trailingComma\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"arrowParens\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"avoid\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"endOfLine\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span>\n  <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>.prettierignore</strong>对以下文件不会格式化</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">build<span class=\"token comment\">/*.js\nsrc/assets\nnode_modules\npublic\ndist\nauto-import.d.ts\ncomponents.d.ts</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"husky\"><a href=\"#husky\" class=\"headerlink\" title=\"husky\"></a>husky</h2><p><code>husky</code>是一个<code>Git Hook</code>，可以帮助我们对<code>commit</code>前，<code>push</code>前以及<code>commit</code>提交的信息进行验证，现在我们就来安装并配置一下这个工具，首先通过自动配置命令安装，命令如下:</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npx husky<span class=\"token operator\">-</span>init <span class=\"token operator\">&amp;&amp;</span> npm install  # npm\nnpx husky<span class=\"token operator\">-</span>init <span class=\"token operator\">&amp;&amp;</span> yarn         # Yarn <span class=\"token number\">1</span>\nnpx husky<span class=\"token operator\">-</span>init <span class=\"token operator\">--</span>yarn2 <span class=\"token operator\">&amp;&amp;</span> yarn # Yarn <span class=\"token number\">2</span><span class=\"token operator\">+</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>执行完毕之后会在项目的根目录出现一个<code>.husky</code>的目录，目录下有一个<code>pre-commit</code>文件，我们将<code>npm test</code>修改为我们需要执行的命令，示例代码如下:</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token hashbang comment\">#!/bin/sh</span>\n<span class=\"token punctuation\">.</span> <span class=\"token string\">\"$(dirname \"</span>$0<span class=\"token string\">\")/_/husky.sh\"</span>\n\nyarn lint<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>最后我们配置一下<code>package.json</code>，示例代码如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string-property property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint src --fix --ext .js,.ts,.jsx,.tsx,.vue &amp;&amp; prettier --write --ignore-unknown\"</span>\"\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<ul>\n<li>src：要验证的目标文件夹；</li>\n<li>–fix：自动修复命令；</li>\n<li>–ext：指定检测文件的后缀<br><strong>现在我们进行<code>commit</code>之前会对代码进行检测并进行格式化</strong></li>\n</ul>\n<h2 id=\"lint-staged\"><a href=\"#lint-staged\" class=\"headerlink\" title=\"lint-staged\"></a>lint-staged</h2><p>我们配置好了<code>husky</code>后，会出现一个问题，就是我们不管是改动一行还是两行都会对整个项目进行代码检查和格式化，我们可以通过<code>lint-staged</code>这个工具来实现只对<code>git</code><strong>暂存区</strong>中的内容进行检查和格式化，配置步骤如下：<br>1.<strong>安装lint-staged</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">yarn add lint<span class=\"token operator\">-</span>staged <span class=\"token operator\">--</span>dev<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>2.<strong>配置package.json</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 新增</span>\n  <span class=\"token string-property property\">\"lint-staged\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string-property property\">\"*.&#123;vue,js,ts,tsx,jsx&#125;\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"eslint --fix\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"prettier --write --ignore-unknown\"</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>3.<strong>修改.husky&#x2F;pre-commit，修改内容如下：</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token hashbang comment\">#!/bin/sh</span>\n<span class=\"token punctuation\">.</span> <span class=\"token string\">\"$(dirname \"</span>$0<span class=\"token string\">\")/_/husky.sh\"</span>\n\nnpx lint<span class=\"token operator\">-</span>staged<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>这里就配置完成了，但是你修改文件后，<code>commit</code>时遇到<code>error</code>会出现这个问题，你所修改的文件都给你返回为原来的样子，并且报错如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">Reverting to original state because <span class=\"token keyword\">of</span> errors<span class=\"token operator\">...</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>4.<strong>解决如下</strong><br>修改<code>.husky/pre-commit</code>，修改内容如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token hashbang comment\">#!/usr/bin/env sh</span>\n<span class=\"token punctuation\">.</span> <span class=\"token string\">\"$(dirname -- \"</span>$0<span class=\"token string\">\")/_/husky.sh\"</span>\n\nnpx lint<span class=\"token operator\">-</span>staged <span class=\"token operator\">--</span>no<span class=\"token operator\">-</span>stash\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>end!!!</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>来源：<a href=\"https://blog.csdn.net/qq_41999617/article/details/124857725\">https://blog.csdn.net/qq_41999617/article/details/124857725</a></p></blockquote>\n","feature":true,"text":"vue3+vite+ts配置eslint+husky创建项目命令 yarn create vite vue3-vite-ts –template vue-ts eslint代码风格检查，prettier进行格式化代码 安装相关依赖 ； yarn add eslint eslint...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"开发记录","slug":"开发记录","count":3,"path":"api/categories/开发记录.json"}],"tags":[{"name":"开发规范","slug":"开发规范","count":2,"path":"api/tags/开发规范.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#vue3-vite-ts%E9%85%8D%E7%BD%AEeslint-husky\"><span class=\"toc-text\">vue3+vite+ts配置eslint+husky</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#eslint%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E6%A3%80%E6%9F%A5%EF%BC%8Cprettier%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">eslint代码风格检查，prettier进行格式化代码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#husky\"><span class=\"toc-text\">husky</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#lint-staged\"><span class=\"toc-text\">lint-staged</span></a></li></ol></li></ol>","author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"奇奇怪怪的兼容性Bug","uid":"311754d371a04ae5df8f53f2dae3f317","slug":"奇奇怪怪的兼容性Bug","date":"2022-12-05T16:28:00.000Z","updated":"2022-12-07T15:11:38.910Z","comments":true,"path":"api/articles/奇奇怪怪的兼容性Bug.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/img/202212060030103.png","text":"IOS 不支持this.$router.go项目中遇到需要刷新当前界面，就使用了this.$router.go(0)，结果ios端不生效,this.router.go(0) 和 window.location.reload() 都是刷新当前页面的方法,Vue 写H5页面时，用 t...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"开发笔记","slug":"开发笔记","count":2,"path":"api/categories/开发笔记.json"}],"tags":[{"name":"兼容性","slug":"兼容性","count":1,"path":"api/tags/兼容性.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"前端面试题目","uid":"4bd7150fd9e4dc678a3c2ce6062a159a","slug":"前端面试题目","date":"2022-03-31T00:42:00.000Z","updated":"2022-05-05T13:37:24.415Z","comments":true,"path":"api/articles/前端面试题目.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforhexo/202203310851324.jpg","text":"html基础1.自定义列表&lt;!DOCTYPE html> &lt;html lang=\"zh\"> &lt;head> &lt;meta charset=\"UTF-8\"> &lt;meta name=\"viewport\" content=\"width=device-width...","link":"","photos":[],"count_time":{"symbolsCount":"133k","symbolsTime":"2:01"},"categories":[],"tags":[{"name":"面试","slug":"面试","count":1,"path":"api/tags/面试.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"feature":true}}