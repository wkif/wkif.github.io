{"title":"GUID生成算法","uid":"a39c7435e01b208d6a8bdb3f64120a16","slug":"GUID生成算法","date":"2020-11-27T01:20:00.000Z","updated":"2022-03-30T16:10:47.363Z","comments":true,"path":"api/articles/GUID生成算法.json","keywords":null,"cover":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforhexo/20201202142640.jpg","content":"<p>随机数不管是前端还是后端都会用到的一个地方，不管是从验证码还是各种生成的状态码，基本都是随机生成的，还有就是一些抽奖的算法，也是用随机数来处理的，生成随机数的方法目前是很多的，但是其实很多是重复性很大的，今天简单的讲一下怎么生成随机数重复性很低的一种办法GUID（Globally Unique Identifier）一种由算法生成的二进制长度为128位的数字标识符</p>\n<p>不重复的原理：GUID 的总数达到了2^128（3.4×10^38）个，所以随机生成两个相同GUID的可能性非常小，但并不为0。用于生成GUID的算法通常都加入了非随机的参数（如时间），以保证这种重复的情况不会发生。</p>\n<p>不BB上代码：</p>\n<p>GUID的 js：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function GUID() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    this.date = new Date();</span><br><span class=\"line\"></span><br><span class=\"line\">    /* 判断是否初始化过，如果初始化过以下代码，则以下代码将不再执行，实际中只执行一次 */</span><br><span class=\"line\"></span><br><span class=\"line\">    if (typeof this.newGUID != &#x27;function&#x27;) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        /* 生成GUID码 */</span><br><span class=\"line\"></span><br><span class=\"line\">        GUID.prototype.newGUID = function() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            this.date = new Date();</span><br><span class=\"line\"></span><br><span class=\"line\">            var guidStr = &#x27;&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">                sexadecimalDate = this.hexadecimal(this.getGUIDDate(), 16);</span><br><span class=\"line\"></span><br><span class=\"line\">                sexadecimalTime = this.hexadecimal(this.getGUIDTime(), 16);</span><br><span class=\"line\"></span><br><span class=\"line\">            for (var i = 0; i &lt; 9; i++) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                guidStr += Math.floor(Math.random()*16).toString(16);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            guidStr += sexadecimalDate;</span><br><span class=\"line\"></span><br><span class=\"line\">            guidStr += sexadecimalTime;</span><br><span class=\"line\"></span><br><span class=\"line\">            while(guidStr.length &lt; 32) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                guidStr += Math.floor(Math.random()*16).toString(16);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            return this.formatGUID(guidStr);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\"></span><br><span class=\"line\">   * 功能：获取当前日期的GUID格式，即8位数的日期：19700101</span><br><span class=\"line\"></span><br><span class=\"line\">     值：返回GUID日期格式的字条串</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\">        GUID.prototype.getGUIDDate = function() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            return this.date.getFullYear() + this.addZero(this.date.getMonth() + 1) + this.addZero(this.date.getDay());</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\"></span><br><span class=\"line\">   * 功能：获取当前时间的GUID格式，即8位数的时间，包括毫秒，毫秒为2位数：12300933</span><br><span class=\"line\"></span><br><span class=\"line\">     值：返回GUID日期格式的字条串</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\">        GUID.prototype.getGUIDTime = function() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            return this.addZero(this.date.getHours()) + this.addZero(this.date.getMinutes()) + this.addZero(this.date.getSeconds()) + this.addZero( parseInt(this.date.getMilliseconds() / 10 ));</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\"></span><br><span class=\"line\">   * 功能: 为一位数的正整数前面添加0，如果是可以转成非NaN数字的字符串也可以实现</span><br><span class=\"line\"></span><br><span class=\"line\">     : 参数表示准备再前面添加0的数字或可以转换成数字的字符串</span><br><span class=\"line\"></span><br><span class=\"line\">        * 返回值: 如果符合条件，返回添加0后的字条串类型，否则返回自身的字符串</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\">        GUID.prototype.addZero = function(num) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            if (Number(num).toString() != &#x27;NaN&#x27; &amp;&amp; num &gt;= 0 &amp;&amp; num &lt; 10) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                return &#x27;0&#x27; + Math.floor(num);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                return num.toString();</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\"></span><br><span class=\"line\">   * 功能：将y进制的数值，转换为x进制的数值</span><br><span class=\"line\"></span><br><span class=\"line\">     ：第1个参数表示欲转换的数值；第2个参数表示欲转换的进制；第3个参数可选，表示当前的进制数，如不写则为10</span><br><span class=\"line\"></span><br><span class=\"line\">        * 返回值：返回转换后的字符串</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\">        GUID.prototype.hexadecimal = function(num, x, y) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            if (y != undefined) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                return parseInt(num.toString(), y).toString(x);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125; else &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                return parseInt(num.toString()).toString(x);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        /*</span><br><span class=\"line\"></span><br><span class=\"line\">   * 功能：格式化32位的字符串为GUID模式的字符串</span><br><span class=\"line\"></span><br><span class=\"line\">     ：第1个参数表示32位的字符串</span><br><span class=\"line\"></span><br><span class=\"line\">        * 返回值：标准GUID格式的字符串</span><br><span class=\"line\"></span><br><span class=\"line\">        */</span><br><span class=\"line\"></span><br><span class=\"line\">        GUID.prototype.formatGUID = function(guidStr) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            var str1 = guidStr.slice(0, 8) + &#x27;-&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">                str2 = guidStr.slice(8, 12) + &#x27;-&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">                str3 =  guidStr.slice(12, 16) + &#x27;-&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">                str4 = guidStr.slice(16, 20) + &#x27;-&#x27;,</span><br><span class=\"line\"></span><br><span class=\"line\">                str5 = guidStr.slice(20);</span><br><span class=\"line\"></span><br><span class=\"line\">            return str1 + str2 + str3 + str4 + str5;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>HTML代码：</p>\n<!DOCTYPE html>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script src=&quot;../js/guid.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">var guid = new GUID();</span><br><span class=\"line\"></span><br><span class=\"line\">var radom = guid.newGUID();</span><br><span class=\"line\"></span><br><span class=\"line\">/*正则处理一下，将中间的-去掉*/</span><br><span class=\"line\"></span><br><span class=\"line\">var str = radom.replace(/-/g, &quot;&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">alert(radom);</span><br><span class=\"line\"></span><br><span class=\"line\">alert(str);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<hr>\n<p>作者：何处锦绣不灰堆</p>\n<p>来源：CSDN</p>\n<p>原文：<a href=\"https://blog.csdn.net/qq_41485414/article/details/80106955\">https://blog.csdn.net/qq_41485414/article/details/80106955</a></p>\n","text":"随机数不管是前端还是后端都会用到的一个地方，不管是从验证码还是各种生成的状态码，基本都是随机生成的，还有就是一些抽奖的算法，也是用随机数来处理的，生成随机数的方法目前是很多的，但是其实很多是重复性很大的，今天简单的讲一下怎么生成随机数重复性很低的一种办法GUID（Globally...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":15,"path":"api/categories/学习笔记.json"}],"tags":[],"toc":"","author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"高考季：我来给你说说湘潭大学","uid":"f666554cbe0f3af858b970d721636c83","slug":"高考季：我来给你说说湘潭大学","date":"2020-11-27T03:05:00.000Z","updated":"2021-06-22T05:47:57.077Z","comments":true,"path":"api/articles/高考季：我来给你说说湘潭大学.json","keywords":null,"cover":[],"text":"&#x3D;&#x3D;_前排提示：_本文是从一个在湘大学习一年（准确说是半年吧）的学生角度介绍下湘潭大学，受众主要是想了解湘大的或者想考湘大的同学 ，属于个人介绍，个人见解，&#x3D;&#x3D; 官方介绍：湘潭大学是湖南省与教育部、国家国防科工局共建的综合性全国重点大学，入...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"生活","slug":"生活","count":2,"path":"api/categories/生活.json"}],"tags":[{"name":"湘大","slug":"湘大","count":1,"path":"api/tags/湘大.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}},"next_post":{"title":"Oracle数据库学习","uid":"4caa006bdb2340f9480c9d6a3166e014","slug":"Oracle数据库学习","date":"2020-11-27T00:36:00.000Z","updated":"2020-12-26T12:18:19.985Z","comments":true,"path":"api/articles/Oracle数据库学习.json","keywords":null,"cover":[],"text":"SQL基础主键 在关系数据库中，一张表中的每一行数据被称为一条记录。一条记录就是由多个字段组成的。例如，students表的两行记录： id class_id name gender score 1 1 小明 M 90 2 1 小红 F 95 每一条记录都包含若干定义好的字段。同...","link":"","photos":[],"count_time":{"symbolsCount":"36k","symbolsTime":"32 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":15,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"SQL","slug":"SQL","count":1,"path":"api/tags/SQL.json"},{"name":"Oracle","slug":"Oracle","count":1,"path":"api/tags/Oracle.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}}}