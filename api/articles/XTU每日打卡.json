{"title":"XTU每日打卡","uid":"d157ee99180c5e77cd0b429c7733a938","slug":"XTU每日打卡","date":"2021-02-03T16:07:00.000Z","updated":"2021-02-05T02:01:02.152Z","comments":true,"path":"api/articles/XTU每日打卡.json","keywords":null,"cover":[],"content":"<h2 id=\"1-抓包\"><a href=\"#1-抓包\" class=\"headerlink\" title=\"1.抓包\"></a>1.抓包</h2><h3 id=\"1-1-工具使用\"><a href=\"#1-1-工具使用\" class=\"headerlink\" title=\"1.1 工具使用\"></a>1.1 工具使用</h3><h4 id=\"ANDROID端app工具：\"><a href=\"#ANDROID端app工具：\" class=\"headerlink\" title=\"ANDROID端app工具：\"></a>ANDROID端app工具：</h4><p><a href=\"https://wwi.lanzous.com/i6q2ila9yhg\">httpcanary9.2.8.1</a></p>\n<p>手机下载安装后安装证书：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204001354.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204001418.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204001442.png\"></p>\n<p>之后点击小蓝飞机</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204001553.png\"></p>\n<p>允许VPN</p>\n<p>便开始抓包了</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204001831.png\"></p>\n<h4 id=\"IOS端：\"><a href=\"#IOS端：\" class=\"headerlink\" title=\"IOS端：\"></a>IOS端：</h4><p>Http Traffic</p>\n<p>Http Traffic是一款 IOS 平台下的抓包工具，可以作为代{过}{滤}理服务器局域网内设备都可以连接并且抓包，监控网络手机或者 PC 机的网络请求，分析网络数据包情况。</p>\n<p>Http Traffic使用 charles 的原理是一样的，通过本机启动一个代{过}{滤}理服务方式抓包，实现了以 iPhone 作为服务端的功能，在同一个局域网内的设备都可以进行连接。 可以抓取网络请求头和请求体的数据，同样可以抓取响应头和响应体的数据.</p>\n<p>局域网内可以访问 iPhone 的 <a href=\"https://link.zhihu.com/?target=http://ip:8002\">http://ip:8002</a> 链接通过浏览器来查看抓包记录,iPhone 本机可以使用http:&#x2F;&#x2F; 127.0.0.1:8002 来访问内嵌的展示网页。</p>\n<p>下载方式,Appstore 搜索 “http traffic” 即可下载.</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210205095840.jpeg\"></p>\n<p>抓包历史记录,抓包历史存档在本机,可以随时查阅抓包的历史,</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210205095913.jpeg\"></p>\n<p>会话内的数据包列表,可以展示数据包类型,数据包大小,以及图片预览等</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210205095931.jpeg\"></p>\n<p>查看数据包的请求和响应数据情况,包括请求链接,请求头,请求行,状态,返回的数据包,响应的头信息等.</p>\n<h3 id=\"1-2-抓取湘大校园打卡数据（以android端为例，IOS类比）\"><a href=\"#1-2-抓取湘大校园打卡数据（以android端为例，IOS类比）\" class=\"headerlink\" title=\"1.2 抓取湘大校园打卡数据（以android端为例，IOS类比）\"></a>1.2 抓取湘大校园打卡数据（以android端为例，IOS类比）</h3><p>关闭抓包软件</p>\n<p>打开湘大校园停留到健康信息上报界面，这里先不提交</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002056.png\"></p>\n<p>开启抓包</p>\n<p>上报</p>\n<p>回到抓包软件</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002213.png\"></p>\n<p>找到链接为 <a href=\"https://app.xiaoyuan.ccb.com/channelManage/outbreak/addOutbreak\">https://app.xiaoyuan.ccb.com/channelManage/outbreak/addOutbreak</a> 的那一条数据</p>\n<p>点击     请求 -》RAW</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002321.png\"></p>\n<p>复制所有数据</p>\n<h2 id=\"2-python文件\"><a href=\"#2-python文件\" class=\"headerlink\" title=\"2.python文件\"></a>2.python文件</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">import requests\nimport json\n \ndef sender():\n    url &#x3D; &#39;https:&#x2F;&#x2F;app.xiaoyuan.ccb.com&#x2F;channelManage&#x2F;outbreak&#x2F;addOutbreak&#39;\n    headers &#x3D; &#123;\n            &#39;Host&#39;: &#39;app.xiaoyuan.ccb.com&#39;,\n            &#39;Connection&#39;: &#39;keep-alive&#39;,\n            &#39;Content-Length&#39;: &#39;1208&#39;,\n            &#39;Accept&#39;: &#39;application&#x2F;json, text&#x2F;plain, *&#x2F;*&#39;,\n            &#x2F;&#x2F;...... 后面同理填\n        &#125;\n    \n    null&#x3D;&#39;&#39;\n    data &#x3D; &#123;&#39;stuClass&#39;:&#39;9999&#39;,&#39;schoolId&#39;:&#39;10530&#39;,&#x2F;&#x2F;...... 后面同理填&#125;\n    data &#x3D; json.dumps(data)\n    res &#x3D; requests.post(url&#x3D;url,data&#x3D;data,headers&#x3D;headers)\n    return res.text\n\ndef main_handler(event, context):\n  return sender()\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n  sender()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>注意python的格式</strong></p>\n<h2 id=\"3-腾讯云云函数部署\"><a href=\"#3-腾讯云云函数部署\" class=\"headerlink\" title=\"3.腾讯云云函数部署\"></a>3.腾讯云云函数部署</h2><p>腾讯云函数：[<a href=\"https://cloud.tencent.com/login?s_url=https://console.cloud.tencent.com/scf/index/1\">官网注册并激活]</a></p>\n<p>新建</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002622.png\"></p>\n<p>名称随便，运行环境python3.6，创建方式空白函数，将写好的py代码复制进index.py，点击完成</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002730.png\"></p>\n<p>在函数管理-函数代码中点测试，</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002953.png\"></p>\n<p>因为上面代码会return res.text，出现下图结果说明ok，还可以去健康信息上报界面验证一下最近一次提交时间</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204002914.png\"></p>\n<p>在触发管理点创建触发器，触发周期改为自定义触发周期，名称随意，Cron表达式 </p>\n<p>0 0 6 * * * *</p>\n<p>表示每天的六点定时执行一次，以此类推，另外不建议将时间设为凌晨时间因为可能不算</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/wkif/ImageHosting/video/20210204003101.png\"></p>\n<p>OK！</p>\n<hr>\n<p>参考文章：</p>\n<p><a href=\"https://quincy.ink/posts/3800ab52.html\">湘大校园-健康信息填报自动打卡</a></p>\n","text":"1.抓包1.1 工具使用ANDROID端app工具：httpcanary9.2.8.1 手机下载安装后安装证书： 之后点击小蓝飞机 允许VPN 便开始抓包了 IOS端：Http Traffic Http Traffic是一款 IOS 平台下的抓包工具，可以作为代{过}{滤}理服务...","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"XTU","slug":"XTU","count":1,"path":"api/tags/XTU.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E6%8A%93%E5%8C%85\"><span class=\"toc-text\">1.抓包</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">1.1 工具使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ANDROID%E7%AB%AFapp%E5%B7%A5%E5%85%B7%EF%BC%9A\"><span class=\"toc-text\">ANDROID端app工具：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#IOS%E7%AB%AF%EF%BC%9A\"><span class=\"toc-text\">IOS端：</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-2-%E6%8A%93%E5%8F%96%E6%B9%98%E5%A4%A7%E6%A0%A1%E5%9B%AD%E6%89%93%E5%8D%A1%E6%95%B0%E6%8D%AE%EF%BC%88%E4%BB%A5android%E7%AB%AF%E4%B8%BA%E4%BE%8B%EF%BC%8CIOS%E7%B1%BB%E6%AF%94%EF%BC%89\"><span class=\"toc-text\">1.2 抓取湘大校园打卡数据（以android端为例，IOS类比）</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-python%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">2.python文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E8%85%BE%E8%AE%AF%E4%BA%91%E4%BA%91%E5%87%BD%E6%95%B0%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">3.腾讯云云函数部署</span></a></li></ol>","author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"微信小程序云开发实现图片的上传、存储、访问","uid":"f5218906270dc804bb69eb4b82ceca1a","slug":"微信小程序云开发实现图片的上传、存储、访问","date":"2021-04-10T13:36:00.000Z","updated":"2022-04-24T08:02:42.189Z","comments":true,"path":"api/articles/微信小程序云开发实现图片的上传、存储、访问.json","keywords":null,"cover":"https://cdn.jsdelivr.net/gh/wkif/imgforTeachingDemo/202203310008758.jpg","text":"我们在进行项目开发时，经常需要处理用户上传的图片，如果用传统的后端开发，处理起来是比较繁琐的。微信小程序云开发提供了一系列API供开发者完成想要的效果。下面我们要实现用户图片的上传、存储及访问。 &lt;button type&#x3D;&quot;primary&quot; b...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":19,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}},"next_post":{"title":"2021C.S.N 冬令营 微信小程序教学提纲","uid":"24ecbcefbf717172def84d571b7f09a0","slug":"2021C-S-N-冬令营-微信小程序教学提纲","date":"2021-01-18T05:43:00.000Z","updated":"2022-03-30T03:51:20.310Z","comments":true,"path":"api/articles/2021C-S-N-冬令营-微信小程序教学提纲.json","keywords":null,"cover":"https://i.loli.net/2019/07/21/5d33d5dc1531213134.png","text":"1.资料1接口地址： https://www.showdoc.cc/128719739414963 2.postman https://wwi.lanzous.com/iWb3zkhskje 3.微信开发官方文档 https://developers.weixin.qq.com/...","link":"","photos":[],"count_time":{"symbolsCount":"23k","symbolsTime":"21 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":19,"path":"api/categories/学习笔记.json"},{"name":"提纲","slug":"学习笔记/提纲","count":1,"path":"api/categories/学习笔记/提纲.json"}],"tags":[{"name":"C.S.N","slug":"C-S-N","count":3,"path":"api/tags/C-S-N.json"},{"name":"微信小程序","slug":"微信小程序","count":5,"path":"api/tags/微信小程序.json"}],"author":{"name":"kif","slug":"blog-author","avatar":"https://kifimg.oss-cn-beijing.aliyuncs.com/imgforteachingdemo/20201127203438.png","link":"/","description":"时间再拉长一点，让我有时间收拾一下心情","socials":{"github":"https://github.com/wkif","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_54739682?type=blog","juejin":"","customs":{}}}}}